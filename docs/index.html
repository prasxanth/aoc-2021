<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-02-18 Fri 14:16 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Advent of Code: 2021</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Prashanth Kumar" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="org.css"/>

<script type="text/javascript" src="org-info.js">
/**
 *
 * @source: org-info.js
 *
 * @licstart  The following is the entire license notice for the
 *  JavaScript code in org-info.js.
 *
 * Copyright (C) 2012-2019 Free Software Foundation, Inc.
 *
 *
 * The JavaScript code in this tag is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in org-info.js.
 *
 */
</script>

<script type="text/javascript">

/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/

<!--/*--><![CDATA[/*><!--*/
org_html_manager.set("TOC_DEPTH", "1");
org_html_manager.set("LINK_HOME", "");
org_html_manager.set("LINK_UP", "");
org_html_manager.set("LOCAL_TOC", "0");
org_html_manager.set("VIEW_BUTTONS", "1");
org_html_manager.set("MOUSE_HINT", "underline");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "1");
org_html_manager.set("VIEW", "info");
org_html_manager.setup();  // activate after the parameters are set
/*]]>*///-->
</script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">Advent of Code: 2021</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org8ef1387">About</a></li>
<li><a href="#orgf2a86d2">Day 01: Sonar Sweep</a></li>
<li><a href="#org84e47c1">Day 02: Dive!</a></li>
<li><a href="#orgc222043">Day 03: Binary Diagnostic</a></li>
<li><a href="#org769e0b1">Day 04: Giant Squid</a></li>
<li><a href="#org85f9935">Day 05: Hydrothermal Venture</a></li>
<li><a href="#org94490a0">Day 06: Lanternfish</a></li>
<li><a href="#org405ecce">Day 07: The Treachery of Whales</a></li>
<li><a href="#org03abd83">Day 08: Seven Segment Search</a></li>
<li><a href="#org2ad00a6">Day 09: Smoke Basin</a></li>
<li><a href="#orgf0092ed">Day 10: Syntax Scoring</a></li>
<li><a href="#orge342bbe">Day 11: Dumbo Octopus</a></li>
<li><a href="#orgad1843f">Day 12: Passage Pathing</a></li>
<li><a href="#orgc6f10dc">Day 13: Transparent Origami</a></li>
<li><a href="#org82096b9">Day 14: Extended Polymerization</a></li>
</ul>
</div>
</div>

<div id="outline-container-org8ef1387" class="outline-2">
<h2 id="org8ef1387">About</h2>
<div class="outline-text-2" id="text-org8ef1387">
<p>
Solutions to <a href="https://adventofcode.com/2021">Advent of Code: 2021</a> in the array programming language <a href="https://www.jsoftware.com/#/">J</a>. 
</p>

<p>
Language and IDE details,
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">Engine</td>
<td class="org-left"><b>j901/j64/linux</b></td>
</tr>

<tr>
<td class="org-left">Release-c</td>
<td class="org-left"><b>commercial/2020-01-11T10:39:00</b></td>
</tr>

<tr>
<td class="org-left">Library</td>
<td class="org-left"><b>9.01.24</b></td>
</tr>

<tr>
<td class="org-left">Qt IDE</td>
<td class="org-left"><b>1.8.7/5.7.1(5.9.5)</b></td>
</tr>

<tr>
<td class="org-left">Platform</td>
<td class="org-left"><b>Linux 64</b></td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-org0f72158" class="outline-3">
<h3 id="org0f72158">Conventions</h3>
<div class="outline-text-3" id="text-org0f72158">
</div>
<div id="outline-container-org6af75cb" class="outline-4">
<h4 id="org6af75cb">General</h4>
<div class="outline-text-4" id="text-org6af75cb">
<div class="note">
<p>
Before we start, I should point out a convention of J: if a dyadic verb is asymmetric, 
for mnemonic purposes you should think of x as operating on y.  One way to express this is to say that x is control 
information and y is data.  Another way is to say that if you were applying the verb many times, you would expect to 
apply the same x to different ys rather than the other way around.
</p>

<p>
&#x2013; <a href="https://www.jsoftware.com/help/jforc/more_verbs.htm">https://www.jsoftware.com/help/jforc/more_verbs.htm</a>
</p>

</div>
</div>
</div>

<div id="outline-container-org440928e" class="outline-4">
<h4 id="org440928e">Naming</h4>
<div class="outline-text-4" id="text-org440928e">
<ul class="org-ul">
<li>All variable and function names are lower case and do <i>not</i> include any underscores</li>
<li>All variable and function names, in tacit and explicit definitions, are at least two characters long to avoid confusion with 
built-in single character J verbs. Exceptions to this are for variables defined in,
<ul class="org-ul">
<li>Single line quoted expressions</li>
<li>Anonymous verbs</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org93df1d7" class="outline-4">
<h4 id="org93df1d7">AOC specific</h4>
<div class="outline-text-4" id="text-org93df1d7">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Convention</th>
<th scope="col" class="org-left">Type</th>
<th scope="col" class="org-left">Description</th>
<th scope="col" class="org-left">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>getin</code></td>
<td class="org-left">Monadic function</td>
<td class="org-left">Read and process data from input file</td>
<td class="org-left"><code>getin =: ;: readin</code></td>
</tr>

<tr>
<td class="org-left"><code>in</code></td>
<td class="org-left">Variable</td>
<td class="org-left">Input data for problem</td>
<td class="org-left"><code>in =: getin 'inputs/day-01.txt'</code></td>
</tr>

<tr>
<td class="org-left"><code>inx</code>; <code>inx1</code>; <code>inx2</code>; <code>...</code></td>
<td class="org-left">Variable(s)</td>
<td class="org-left">Example input data for problem</td>
<td class="org-left"><code>inx =: getin 'inpus/day-01-example.txt'</code></td>
</tr>

<tr>
<td class="org-left"><code>part1</code>; <code>part2</code></td>
<td class="org-left">Monadic functions</td>
<td class="org-left">Solutions to respective parts of problems with <code>y = data</code></td>
<td class="org-left"><code>part1 in</code></td>
</tr>
</tbody>
</table>

<div class="attention">
<p>
General functions that would be useful beyond the scope of the solution are indicated with the ❖ symbol.
</p>

</div>

<p>
The approach to formulating solutions is as follows,
</p>

<ul class="org-ul">
<li>To the extent possible, function definitions are general enough for use in both parts of the problem.</li>
<li>Each part should be independently executable, that is, it should not rely on any results from the other part.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org732f1d6" class="outline-3">
<h3 id="org732f1d6">Site</h3>
<div class="outline-text-3" id="text-org732f1d6">
<p>
This site was generated using <b>Emacs 26.3</b> with <b>Org mode 9.1.9</b>. A custom CSS and <a href="https://orgmode.org/worg/code/org-info-js/">Org-Info.JS</a> were used to style the exported HTML.
</p>

<p>
This site is best viewed with <a href="https://fonts.google.com/specimen/Fira+Sans">Fira Sans</a> and <a href="https://fonts.google.com/specimen/Fira+Code">Fira Code</a> fonts.
</p>
</div>
</div>
</div>

<div id="outline-container-orgf2a86d2" class="outline-2">
<h2 id="orgf2a86d2"><a href="https://adventofcode.com/2021/day/1">Day 01: Sonar Sweep</a></h2>
<div class="outline-text-2" id="text-orgf2a86d2">
<div id="text-table-of-contents">
<ul>
<li><a href="#org2a2c511">Setup</a></li>
<li><a href="#org3826e0d">Read data</a></li>
<li><a href="#org73ea36d">General function definition</a></li>
<li><a href="#org4ee3d47">Part 1</a>
<ul>
<li><a href="#orgb58ff48">Function definition</a></li>
<li><a href="#orgb3970b6">Test</a></li>
<li><a href="#orge72d807">Solution</a></li>
</ul>
</li>
<li><a href="#org8bebb76">Part 2</a>
<ul>
<li><a href="#org05f8c19">Function definition</a></li>
<li><a href="#org2ef941a">Test</a></li>
<li><a href="#org6e41a80">Solution</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org2a2c511" class="outline-3">
<h3 id="org2a2c511">Setup</h3>
<div class="outline-text-3" id="text-org2a2c511">
<div class="org-src-container">
<pre class="src src-j">cocurrent <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'day01'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-j">load <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'utils.ijs'</span>  <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">readin</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3826e0d" class="outline-3">
<h3 id="org3826e0d">Read data</h3>
<div class="outline-text-3" id="text-org3826e0d">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">getin</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">".</span> readin
</pre>
</div>
</div>
</div>

<div id="outline-container-org73ea36d" class="outline-3">
<h3 id="org73ea36d">General function definition</h3>
<div class="outline-text-3" id="text-org73ea36d">
<p>
Generic function to calculate number of increases in data for a given moving window size,
</p>
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Calculate number of increases</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = data</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">x = moving window size</span>
<span style="color: #BA36A5;">ninc</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">+</span><span style="color: #00ff00;">/</span> <span style="color: #0000ff;">@</span> (2 <span style="color: #ff0000;">&lt;</span><span style="color: #00ff00;">/\</span> <span style="color: #ff0000;">+</span><span style="color: #00ff00;">/\</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org4ee3d47" class="outline-3">
<h3 id="org4ee3d47">Part 1</h3>
<div class="outline-text-3" id="text-org4ee3d47">
</div>
<div id="outline-container-orgb58ff48" class="outline-4">
<h4 id="orgb58ff48">Function definition</h4>
<div class="outline-text-4" id="text-orgb58ff48">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part1</span><span style="color: #000000;">=:</span> 1<span style="color: #0000ff;">&amp;</span>ninc
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb3970b6" class="outline-4">
<h4 id="orgb3970b6">Test</h4>
<div class="outline-text-4" id="text-orgb3970b6">
<div class="org-src-container">
<pre class="src src-j">assert 7 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-01-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge72d807" class="outline-4">
<h4 id="orge72d807">Solution</h4>
<div class="outline-text-4" id="text-orge72d807">
<div class="org-src-container">
<pre class="src src-j">assert 1602 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-01.txt'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8bebb76" class="outline-3">
<h3 id="org8bebb76">Part 2</h3>
<div class="outline-text-3" id="text-org8bebb76">
</div>
<div id="outline-container-org05f8c19" class="outline-4">
<h4 id="org05f8c19">Function definition</h4>
<div class="outline-text-4" id="text-org05f8c19">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part2</span><span style="color: #000000;">=:</span> 3<span style="color: #0000ff;">&amp;</span>ninc
</pre>
</div>
</div>
</div>

<div id="outline-container-org2ef941a" class="outline-4">
<h4 id="org2ef941a">Test</h4>
<div class="outline-text-4" id="text-org2ef941a">
<div class="org-src-container">
<pre class="src src-j">assert 7 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-01-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6e41a80" class="outline-4">
<h4 id="org6e41a80">Solution</h4>
<div class="outline-text-4" id="text-org6e41a80">
<div class="org-src-container">
<pre class="src src-j">assert 1633 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-01.txt'</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org84e47c1" class="outline-2">
<h2 id="org84e47c1"><a href="https://adventofcode.com/2021/day/2">Day 02: Dive!</a></h2>
<div class="outline-text-2" id="text-org84e47c1">
<div id="text-table-of-contents">
<ul>
<li><a href="#org9acfbc6">Setup</a></li>
<li><a href="#orga61aacb">Read data</a></li>
<li><a href="#org96a1425">General function definition</a></li>
<li><a href="#org34b3757">Part 1</a>
<ul>
<li><a href="#orgc8106ff">Function definition</a></li>
<li><a href="#orgc970ae4">Test</a></li>
<li><a href="#org8ac6dad">Solution</a></li>
</ul>
</li>
<li><a href="#org22830e5">Part 2</a>
<ul>
<li><a href="#org0e34b7d">Function definition</a></li>
<li><a href="#orgf947bbe">Test</a></li>
<li><a href="#org5a8bf7f">Solution</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org9acfbc6" class="outline-3">
<h3 id="org9acfbc6">Setup</h3>
<div class="outline-text-3" id="text-org9acfbc6">
<div class="org-src-container">
<pre class="src src-j">cocurrent <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'day02'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-j">load <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'utils.ijs'</span>  <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">readin</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga61aacb" class="outline-3">
<h3 id="orga61aacb">Read data</h3>
<div class="outline-text-3" id="text-orga61aacb">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">getin</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">;:</span> readin
</pre>
</div>
</div>
</div>

<div id="outline-container-org96a1425" class="outline-3">
<h3 id="org96a1425">General function definition</h3>
<div class="outline-text-3" id="text-org96a1425">
</div>
<div id="outline-container-orga8401b7" class="outline-5">
<h5 id="orga8401b7">Directions</h5>
<div class="outline-text-5" id="text-orga8401b7">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Displacement vectors</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = input</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Returns three column boolean mask matrix of size (|. $ y)</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">for each direction</span>
<span style="color: #BA36A5;">dirxns</span><span style="color: #000000;">=:</span> (<span style="color: #008000;">'forward'</span><span style="color: #ff0000;">;</span> <span style="color: #008000;">'up'</span><span style="color: #ff0000;">;</span> <span style="color: #008000;">'down'</span>) <span style="color: #ff0000;">E.</span><span style="color: #00ff00;">/</span><span style="color: #0000ff;">"</span>0 1 <span style="color: #ff0000;">{.</span><span style="color: #0000ff;">"</span>1
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdf8b595" class="outline-5">
<h5 id="orgdf8b595">Displacements</h5>
<div class="outline-text-5" id="text-orgdf8b595">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Horizontal and vertical displacement vectors</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = input</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Returns two column matrix</span>
<span style="color: #8D8D84;">NB.   </span><span style="color: #8D8D84; font-style: italic;">- Column 1 = horizonal displacement = forward</span>
<span style="color: #8D8D84;">NB.   </span><span style="color: #8D8D84; font-style: italic;">- Column 2 = vertical displacement = down - up</span>
<span style="color: #BA36A5;">disp</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[:</span> (<span style="color: #ff0000;">{.</span> <span style="color: #ff0000;">,.</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">-</span><span style="color: #00ff00;">/</span><span style="color: #ff0000;">|.</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">}.</span>) (<span style="color: #ff0000;">".</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">&gt;</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">{:</span><span style="color: #0000ff;">"</span>1<span style="color: #0000ff;">@</span><span style="color: #ff0000;">]</span>) <span style="color: #ff0000;">*</span><span style="color: #0000ff;">"</span>1 dirxns
</pre>
</div>

<p>
Reading from right to left, <code>disp</code> works as follows,
</p>

<ul class="org-ul">
<li><code>(".@&gt;@{:"1@]) *"1 dirxns</code>: Displacements corresponding to each direction.</li>
<li><code>({. ,. [: -/|.@}.)</code>: Forward (horizontal) stitched with vertical, <code>down - up</code>, displacement.</li>
</ul>

<pre class="example">
┌───────────┬──────────────┬─────────────────────┬──────┐
│y          │(d=. dirxns) y│((".@&gt;@{:"1) *"1 d) y│disp y│
├───────────┼──────────────┼─────────────────────┼──────┤
│┌───────┬─┐│1 0 1 0 0 1   │5 0 8 0 0 2          │5  0  │
││forward│5││0 0 0 1 0 0   │0 0 0 3 0 0          │0  5  │
│├───────┼─┤│0 1 0 0 1 0   │0 5 0 0 8 0          │8  0  │
││down   │5││              │                     │0 _3  │
│├───────┼─┤│              │                     │0  8  │
││forward│8││              │                     │2  0  │
│├───────┼─┤│              │                     │      │
││up     │3││              │                     │      │
│├───────┼─┤│              │                     │      │
││down   │8││              │                     │      │
│├───────┼─┤│              │                     │      │
││forward│2││              │                     │      │
│└───────┴─┘│              │                     │      │
└───────────┴──────────────┴─────────────────────┴──────┘
</pre>
</div>
</div>
</div>

<div id="outline-container-org34b3757" class="outline-3">
<h3 id="org34b3757">Part 1</h3>
<div class="outline-text-3" id="text-org34b3757">
</div>
<div id="outline-container-orgc8106ff" class="outline-4">
<h4 id="orgc8106ff">Function definition</h4>
<div class="outline-text-4" id="text-orgc8106ff">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part1</span><span style="color: #000000;">=:</span> 3 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'+/ h * +/ v [ v=. {:"1 d [ h=. {."1 d [ d=. disp y'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc970ae4" class="outline-4">
<h4 id="orgc970ae4">Test</h4>
<div class="outline-text-4" id="text-orgc970ae4">
<div class="org-src-container">
<pre class="src src-j">assert 150 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-02-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8ac6dad" class="outline-4">
<h4 id="org8ac6dad">Solution</h4>
<div class="outline-text-4" id="text-org8ac6dad">
<div class="org-src-container">
<pre class="src src-j">assert 1868935 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-02.txt'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org22830e5" class="outline-3">
<h3 id="org22830e5">Part 2</h3>
<div class="outline-text-3" id="text-org22830e5">
</div>
<div id="outline-container-org0e34b7d" class="outline-4">
<h4 id="org0e34b7d">Function definition</h4>
<div class="outline-text-4" id="text-org0e34b7d">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part2</span><span style="color: #000000;">=:</span> 3 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'+/ h * +/ h * +/\ v [ v=. {:"1 d [ h=. {."1 d [ d=. disp y'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf947bbe" class="outline-4">
<h4 id="orgf947bbe">Test</h4>
<div class="outline-text-4" id="text-orgf947bbe">
<div class="org-src-container">
<pre class="src src-j">assert 900 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-02-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5a8bf7f" class="outline-4">
<h4 id="org5a8bf7f">Solution</h4>
<div class="outline-text-4" id="text-org5a8bf7f">
<div class="org-src-container">
<pre class="src src-j">assert 1965970888 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-02.txt'</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc222043" class="outline-2">
<h2 id="orgc222043"><a href="https://adventofcode.com/2021/day/3">Day 03: Binary Diagnostic</a></h2>
<div class="outline-text-2" id="text-orgc222043">
<div id="text-table-of-contents">
<ul>
<li><a href="#orgdb96a55">Setup</a></li>
<li><a href="#orge8fdd23">Read data</a></li>
<li><a href="#orgc63b84a">Part 1</a>
<ul>
<li><a href="#orgb2f7bf0">Function definition</a></li>
<li><a href="#orgdb769ed">Test</a></li>
<li><a href="#org8958c85">Solution</a></li>
</ul>
</li>
<li><a href="#org90a972d">Part 2: Approach 1</a>
<ul>
<li><a href="#org3867a7b">Function definitions</a></li>
<li><a href="#orgcd5a731">Test</a></li>
<li><a href="#org7be0926">Solution</a></li>
</ul>
</li>
<li><a href="#org9918609">Part 2: Approach 2</a>
<ul>
<li><a href="#org62be3d8">Function definitions</a></li>
<li><a href="#orgba4f8cd">Test</a></li>
<li><a href="#org49e304d">Solution</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgdb96a55" class="outline-3">
<h3 id="orgdb96a55">Setup</h3>
<div class="outline-text-3" id="text-orgdb96a55">
<div class="org-src-container">
<pre class="src src-j">cocurrent <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'day03'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-j">load <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'utils.ijs'</span>  <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">readin</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge8fdd23" class="outline-3">
<h3 id="orge8fdd23">Read data</h3>
<div class="outline-text-3" id="text-orge8fdd23">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">getin</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">".</span><span style="color: #0000ff;">"</span>0 readin
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc63b84a" class="outline-3">
<h3 id="orgc63b84a">Part 1</h3>
<div class="outline-text-3" id="text-orgc63b84a">
</div>
<div id="outline-container-orgb2f7bf0" class="outline-4">
<h4 id="orgb2f7bf0">Function definition</h4>
<div class="outline-text-4" id="text-orgb2f7bf0">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part1</span><span style="color: #000000;">=:</span> (<span style="color: #ff0000;">*</span><span style="color: #0000ff;">&amp;:</span><span style="color: #ff0000;">#.</span> <span style="color: #ff0000;">-.</span>)<span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">-:</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">#</span> <span style="color: #ff0000;">&lt;</span> <span style="color: #ff0000;">+</span><span style="color: #00ff00;">/</span>)  <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">(epsilon =: -. gamma)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdb769ed" class="outline-4">
<h4 id="orgdb769ed">Test</h4>
<div class="outline-text-4" id="text-orgdb769ed">
<div class="org-src-container">
<pre class="src src-j">assert 198 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-03-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8958c85" class="outline-4">
<h4 id="org8958c85">Solution</h4>
<div class="outline-text-4" id="text-org8958c85">
<div class="org-src-container">
<pre class="src src-j">assert 2595824 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-03.txt'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org90a972d" class="outline-3">
<h3 id="org90a972d">Part 2: Approach 1</h3>
<div class="outline-text-3" id="text-org90a972d">
</div>
<div id="outline-container-org3867a7b" class="outline-4">
<h4 id="org3867a7b">Function definitions</h4>
<div class="outline-text-4" id="text-org3867a7b">
</div>
<div id="outline-container-org8406213" class="outline-5">
<h5 id="org8406213">Filter rows</h5>
<div class="outline-text-5" id="text-org8406213">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Filter rows in y with 'u' common elements in column x</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = input matrix</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">x = target column for 'u'</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">u = comparison operator (&lt; , &gt; , &gt;: , &lt;: , =)</span>
<span style="color: #BA36A5;">filtrows</span><span style="color: #000000;">=:</span> 1 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'[ #~ {"1~ = -:@#@[ u +/@:({"1~)'</span>
</pre>
</div>

<pre class="example">
┌───────────────┬───────────────┬───────────────┬───────────────┐
│y              │y &lt;: filtrows 0│y &gt; filtrows 0 │y &lt;: filtrows 5│
├───────────────┼───────────────┼───────────────┼───────────────┤
│1 1 0 1 1 1 0 0│1 1 0 1 1 1 0 0│0 1 0 0 1 0 1 0│1 1 0 1 1 1 0 0│
│0 1 0 0 1 0 1 0│1 0 1 0 0 1 0 1│0 0 0 0 0 0 1 1│1 0 1 0 0 1 0 1│
│0 0 0 0 0 0 1 1│1 1 1 0 0 1 1 1│0 1 0 1 1 1 1 1│1 1 1 0 0 1 1 1│
│1 0 1 0 0 1 0 1│1 0 0 1 1 1 0 1│0 1 0 1 1 1 1 0│0 1 0 1 1 1 1 1│
│1 1 1 0 0 1 1 1│1 1 1 0 0 1 0 0│0 0 1 0 0 1 1 1│1 0 0 1 1 1 0 1│
│0 1 0 1 1 1 1 1│               │               │1 1 1 0 0 1 0 0│
│1 0 0 1 1 1 0 1│               │               │0 1 0 1 1 1 1 0│
│1 1 1 0 0 1 0 0│               │               │0 0 1 0 0 1 1 1│
│0 1 0 1 1 1 1 0│               │               │               │
│0 0 1 0 0 1 1 1│               │               │               │
└───────────────┴───────────────┴───────────────┴───────────────┘
</pre>
</div>
</div>

<div id="outline-container-org7f0b001" class="outline-5">
<h5 id="org7f0b001">❖ Reducer</h5>
<div class="outline-text-5" id="text-org7f0b001">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Reduce using verb 'u/\.' on a boxed list y</span>
<span style="color: #BA36A5;">foldr</span><span style="color: #000000;">=:</span> 1 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'[: u&amp;.&gt;/\. ,&amp;boxxopen'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbe8cc2e" class="outline-5">
<h5 id="orgbe8cc2e">Rating</h5>
<div class="outline-text-5" id="text-orgbe8cc2e">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Recursively filter rows using 'u' common elements from each column</span>
<span style="color: #BA36A5;">rating</span><span style="color: #000000;">=:</span> 1 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'[: &gt;@(] #~ 1: = #&amp;&gt;) (] (u filtrows)~ foldr~ ;/@i.@-@{:@$)'</span>
</pre>
</div>

<p>
Reading from right to left, <code>rating</code> works as follows,
</p>

<ul class="org-ul">
<li><code>] (u filtrows)~ foldr~ ;/@i.@-@{:@$</code>: Recursively filter rows with <code>u</code> common elements from each column
<ul class="org-ul">
<li><code>;/@i.@-@{:@$</code>: Boxed sequence of integers in decreasing order from column length to 0</li>
</ul></li>
<li><code>&gt;@(] #~ 1: = #&amp;&gt;)</code>: Unbox (first) element containing only one row.</li>
</ul>
</div>
</div>

<div id="outline-container-orgb6b4a10" class="outline-5">
<h5 id="orgb6b4a10">Life support rating</h5>
<div class="outline-text-5" id="text-orgb6b4a10">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part2</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">*</span><span style="color: #00ff00;">/</span><span style="color: #0000ff;">@:</span><span style="color: #ff0000;">#.</span><span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">&gt;</span> rating <span style="color: #ff0000;">,:</span> <span style="color: #ff0000;">&lt;:</span> rating)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgcd5a731" class="outline-4">
<h4 id="orgcd5a731">Test</h4>
<div class="outline-text-4" id="text-orgcd5a731">
<div class="org-src-container">
<pre class="src src-j">assert 230 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-03-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7be0926" class="outline-4">
<h4 id="org7be0926">Solution</h4>
<div class="outline-text-4" id="text-org7be0926">
<div class="org-src-container">
<pre class="src src-j">assert 2135254 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-03.txt'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9918609" class="outline-3">
<h3 id="org9918609">Part 2: Approach 2</h3>
<div class="outline-text-3" id="text-org9918609">
</div>
<div id="outline-container-org62be3d8" class="outline-4">
<h4 id="org62be3d8">Function definitions</h4>
<div class="outline-text-4" id="text-org62be3d8">
<p>
Approach is to iteratively remove all rows with the most (or least) common elements across each column.
</p>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">rating</span><span style="color: #000000;">=:</span> 1 <span style="color: #ff0000;">:</span> 0
<span style="color: #BA36A5;">ix</span><span style="color: #000000;">=.</span> <span style="color: #ff0000;">{.</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">I.</span><span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">-.</span> <span style="color: #0000ff;">@</span> (<span style="color: #ff0000;">-:</span> 1<span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">|.</span>)<span style="color: #0000ff;">"</span>1 <span style="color: #0000ff;">@</span> <span style="color: #ff0000;">|:</span>) <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">index of first column where elements differ</span>
<span style="color: #BA36A5;">cm</span><span style="color: #000000;">=.</span> <span style="color: #ff0000;">{</span> <span style="color: #ff0000;">+</span><span style="color: #00ff00;">/</span> u<span style="color: #00ff00;">~</span> <span style="color: #ff0000;">#</span> <span style="color: #ff0000;">-</span> <span style="color: #ff0000;">+</span><span style="color: #00ff00;">/</span>        <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">common elements 'u' in x = column of y = data</span>
<span style="color: #BA36A5;">fr</span><span style="color: #000000;">=.</span> ix (<span style="color: #ff0000;">]</span> <span style="color: #ff0000;">#</span><span style="color: #00ff00;">~</span> cm <span style="color: #ff0000;">=</span> <span style="color: #ff0000;">{</span><span style="color: #0000ff;">"</span>1) <span style="color: #ff0000;">]</span>  <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">filter all rows with 'cm' common elements in column (ix y)</span>
fr<span style="color: #0000ff;">`</span><span style="color: #ff0000;">]</span><span style="color: #0000ff;">@.</span>(1 <span style="color: #ff0000;">=</span> <span style="color: #ff0000;">#</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">]</span>)<span style="color: #0000ff;">^:</span>_ y       <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">iterate until one row remains</span>
)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part2</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">*</span><span style="color: #00ff00;">/</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">#.</span> <span style="color: #ff0000;">&gt;</span> rating <span style="color: #ff0000;">,</span> <span style="color: #ff0000;">&lt;:</span> rating
</pre>
</div>
</div>
</div>

<div id="outline-container-orgba4f8cd" class="outline-4">
<h4 id="orgba4f8cd">Test</h4>
<div class="outline-text-4" id="text-orgba4f8cd">
<div class="org-src-container">
<pre class="src src-j">assert 230 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-03-example.txt'</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org49e304d" class="outline-4">
<h4 id="org49e304d">Solution</h4>
<div class="outline-text-4" id="text-org49e304d">
<div class="org-src-container">
<pre class="src src-j">assert 2135254 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-03.txt'</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org769e0b1" class="outline-2">
<h2 id="org769e0b1"><a href="https://adventofcode.com/2021/day/4">Day 04: Giant Squid</a></h2>
<div class="outline-text-2" id="text-org769e0b1">
<div id="text-table-of-contents">
<ul>
<li><a href="#org47dddb0">Setup</a></li>
<li><a href="#orgfb22e3a">Read data</a></li>
<li><a href="#orgf82a96b">General function definitions</a>
<ul>
<li><a href="#org9ecb70d">Winning Sequence</a></li>
<li><a href="#org31f6dbb">Score</a></li>
</ul>
</li>
<li><a href="#org3622333">Part 1</a>
<ul>
<li><a href="#org15f50a8">Function definition</a></li>
<li><a href="#orgb6379ac">Test</a></li>
<li><a href="#orgdd8e7e8">Solution</a></li>
</ul>
</li>
<li><a href="#orgf474b1e">Part 2</a>
<ul>
<li><a href="#org824d99c">Function definition</a></li>
<li><a href="#org85dd2d0">Test</a></li>
<li><a href="#orgebbf6d0">Solution</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org47dddb0" class="outline-3">
<h3 id="org47dddb0">Setup</h3>
<div class="outline-text-3" id="text-org47dddb0">
<div class="org-src-container">
<pre class="src src-j">cocurrent <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'day04'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-j">load <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'utils.ijs'</span>  <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">readin</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfb22e3a" class="outline-3">
<h3 id="orgfb22e3a">Read data</h3>
<div class="outline-text-3" id="text-orgfb22e3a">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">getin</span><span style="color: #000000;">=:</span> a<span style="color: #ff0000;">:</span> <span style="color: #ff0000;">-.</span><span style="color: #00ff00;">~</span> <span style="color: #ff0000;">&lt;</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">".</span> readin<span style="color: #0000ff;">@</span><span style="color: #ff0000;">]</span>
</pre>
</div>

<p>
Split list of calls and boards in input data,
</p>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">calls</span><span style="color: #000000;">=:</span> 0<span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">{::</span>
<span style="color: #BA36A5;">boards</span><span style="color: #000000;">=:</span> _5 <span style="color: #ff0000;">[</span><span style="color: #00ff00;">\</span> <span style="color: #ff0000;">&gt;</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">}.</span> 
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf82a96b" class="outline-3">
<h3 id="orgf82a96b">General function definitions</h3>
<div class="outline-text-3" id="text-orgf82a96b">
</div>
<div id="outline-container-org9ecb70d" class="outline-4">
<h4 id="org9ecb70d">Winning Sequence</h4>
<div class="outline-text-4" id="text-org9ecb70d">
<p>
One approach to obtaining the winning sequence of boards and corresponding calls is described below.
</p>

<p>
Consider the following set of calls,
</p>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">excalls</span><span style="color: #000000;">=:</span> 45 41 47 36 46 27 44 24 33 35 26 38 43 28 23 32 34 25 29 39 31 40 37 42 30
</pre>
</div>

<p>
and the corresponding board,
</p>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">exboard</span><span style="color: #000000;">=:</span> _5 <span style="color: #ff0000;">[</span><span style="color: #00ff00;">\</span> 23 <span style="color: #ff0000;">+</span> 25<span style="color: #ff0000;">?.</span>25
exboard
</pre>
</div>

<pre class="example">
42 44 31 26 32
36 34 40 45 43
28 24 25 41 46
30 35 29 47 33
39 23 37 38 27

</pre>

<p>
The call number (index) at which an element on the board is marked is,
</p>

<div class="org-src-container">
<pre class="src src-j">excalls <span style="color: #ff0000;">i.</span> exboard
</pre>
</div>

<pre class="example">
23  6 20 10 15
 3 16 21  0 12
13  7 17  1  4
24  9 18  2  8
19 14 22 11  5

</pre>

<div class="important">
<p>
The <b>maximum</b> in each row (or column) above is the call index at which all numbers in that row (or column) are marked.
</p>

</div>

<p>
For example, all numbers in the first row are not marked until the 23<sup>rd</sup> number is called. For the second row, it is the 21<sup>st</sup> number called and so on.
Thus,
</p>

<div class="org-src-container">
<pre class="src src-j">excalls ((<span style="color: #ff0000;">&gt;.</span><span style="color: #00ff00;">/</span><span style="color: #0000ff;">"</span>1 <span style="color: #ff0000;">,</span> <span style="color: #ff0000;">&gt;.</span><span style="color: #00ff00;">/</span>)<span style="color: #0000ff;">@</span><span style="color: #ff0000;">i.</span>) exboard
</pre>
</div>

<pre class="example">
23 21 17 24 22 24 16 22 11 15

</pre>

<div class="important">
<p>
The earliest a board can win <i>Bingo!</i> is given by the <b>minimum</b> of the (maximum row and column) indices. 
</p>

</div>

<p>
In the example above, the board wins after the 11<sup>th</sup> number is called because after that all numbers in the 4<sup>th</sup> column will be marked,
</p>

<div class="org-src-container">
<pre class="src src-j">excalls ((<span style="color: #ff0000;">&lt;.</span><span style="color: #00ff00;">/</span>)<span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">&gt;.</span><span style="color: #00ff00;">/</span><span style="color: #0000ff;">"</span>1 <span style="color: #ff0000;">,</span> <span style="color: #ff0000;">&gt;.</span><span style="color: #00ff00;">/</span>)<span style="color: #0000ff;">@</span><span style="color: #ff0000;">i.</span>) exboard
</pre>
</div>

<pre class="example">
11

</pre>

<p>
Now consider the example set of calls and the three boards in the problem,
</p>
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">inx</span><span style="color: #000000;">=:</span> getin <span style="color: #008000;">'inputs/day-04-example.txt'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-j">calls inx
</pre>
</div>
<pre class="example">
7 4 9 5 11 17 23 2 0 14 21 24 10 16 13 6 15 25 12 22 18 20 8 19 3 26 1

</pre>

<div class="org-src-container">
<pre class="src src-j">boards inx
</pre>
</div>

<pre class="example">
22 13 17 11  0
 8  2 23  4 24
21  9 14 16  7
 6 10  3 18  5
 1 12 20 15 19

 3 15  0  2 22
 9 18 13 17  5
19  8  7 25 23
20 11 10 24  4
14 21 16 12  6

14 21 17 24  4
10 16 15  9 19
18  8 23 26 20
22 11 13  6  5
 2  0 12  3  7
</pre>

<p>
The call indices at which each board wins <i>Bingo!</i> ⇒ 1 row or column is completely marked,
</p>

<div class="org-src-container">
<pre class="src src-j">(calls (<span style="color: #ff0000;">&lt;.</span><span style="color: #00ff00;">/</span>)<span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">&gt;.</span><span style="color: #00ff00;">/</span><span style="color: #0000ff;">"</span>1 <span style="color: #ff0000;">,</span> <span style="color: #ff0000;">&gt;.</span><span style="color: #00ff00;">/</span>)<span style="color: #0000ff;">"</span>_1<span style="color: #0000ff;">@</span><span style="color: #ff0000;">i.</span> boards) inx
</pre>
</div>

<pre class="example">
13 14 11

</pre>

<p>
Calls up to the n<sup>th</sup> index = <code>(n + 1) {. calls</code> ⇒ above results must be incremented by one,
</p>

<div class="org-src-container">
<pre class="src src-j">(calls <span style="color: #ff0000;">&gt;:</span><span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">&lt;.</span><span style="color: #00ff00;">/</span>)<span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">&gt;.</span><span style="color: #00ff00;">/</span><span style="color: #0000ff;">"</span>1 <span style="color: #ff0000;">,</span> <span style="color: #ff0000;">&gt;.</span><span style="color: #00ff00;">/</span>)<span style="color: #0000ff;">"</span>_1<span style="color: #0000ff;">@</span><span style="color: #ff0000;">i.</span> boards) inx
</pre>
</div>

<pre class="example">
14 15 12

</pre>

<div class="attention">
<p>
<b>Grading-up</b> the winning call indices gives the corresponding boards.
</p>

</div>

<p>
So a two column list of boards and corresponding win call indices, ordered by the call indices, is
</p>

<div class="org-src-container">
<pre class="src src-j">(calls (<span style="color: #ff0000;">/:</span> <span style="color: #ff0000;">,.</span> <span style="color: #ff0000;">/:</span><span style="color: #00ff00;">~</span>)<span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">&gt;:</span><span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">&lt;.</span><span style="color: #00ff00;">/</span>)<span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">&gt;.</span><span style="color: #00ff00;">/</span><span style="color: #0000ff;">"</span>1 <span style="color: #ff0000;">,</span> <span style="color: #ff0000;">&gt;.</span><span style="color: #00ff00;">/</span>)<span style="color: #0000ff;">"</span>_1<span style="color: #0000ff;">@</span><span style="color: #ff0000;">i.</span>) boards) inx
</pre>
</div>

<pre class="example">
2 12
0 14
1 15

</pre>

<p>
⇒ the 2<sup>nd</sup> board wins after the 12<sup>th</sup> call, the 0<sup>th</sup> board after the 14<sup>th</sup> and the 1<sup>st</sup> board after the 15<sup>th</sup> call.
</p>

<p>
The winning sequence function is thus defined,
</p>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">winseq</span><span style="color: #000000;">=:</span> (<span style="color: #ff0000;">/:</span> <span style="color: #ff0000;">,.</span> <span style="color: #ff0000;">/:</span><span style="color: #00ff00;">~</span>)<span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">&gt;:</span><span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">&lt;.</span><span style="color: #00ff00;">/</span>)<span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">&gt;.</span><span style="color: #00ff00;">/</span><span style="color: #0000ff;">"</span>1 <span style="color: #ff0000;">,</span> <span style="color: #ff0000;">&gt;.</span><span style="color: #00ff00;">/</span>)<span style="color: #0000ff;">"</span>_1<span style="color: #0000ff;">@</span><span style="color: #ff0000;">i.</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org31f6dbb" class="outline-4">
<h4 id="org31f6dbb">Score</h4>
<div class="outline-text-4" id="text-org31f6dbb">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Calculate score</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = boards</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">x = calls</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">u = monadic function to select nth winning board</span>
<span style="color: #BA36A5;">score</span><span style="color: #000000;">=:</span> 1 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'(c {:@{. x) * +/ (, b { y) -. (c {. x) [ ''b c''=. x u @ winseq y'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3622333" class="outline-3">
<h3 id="org3622333">Part 1</h3>
<div class="outline-text-3" id="text-org3622333">
</div>
<div id="outline-container-org15f50a8" class="outline-4">
<h4 id="org15f50a8">Function definition</h4>
<div class="outline-text-4" id="text-org15f50a8">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part1</span><span style="color: #000000;">=:</span> calls <span style="color: #ff0000;">{.</span> score boards
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb6379ac" class="outline-4">
<h4 id="orgb6379ac">Test</h4>
<div class="outline-text-4" id="text-orgb6379ac">
<div class="org-src-container">
<pre class="src src-j">assert 4512 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-04-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdd8e7e8" class="outline-4">
<h4 id="orgdd8e7e8">Solution</h4>
<div class="outline-text-4" id="text-orgdd8e7e8">
<div class="org-src-container">
<pre class="src src-j">assert 2496 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-04.txt'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf474b1e" class="outline-3">
<h3 id="orgf474b1e">Part 2</h3>
<div class="outline-text-3" id="text-orgf474b1e">
</div>
<div id="outline-container-org824d99c" class="outline-4">
<h4 id="org824d99c">Function definition</h4>
<div class="outline-text-4" id="text-org824d99c">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part2</span><span style="color: #000000;">=:</span> calls <span style="color: #ff0000;">{:</span> score boards
</pre>
</div>
</div>
</div>

<div id="outline-container-org85dd2d0" class="outline-4">
<h4 id="org85dd2d0">Test</h4>
<div class="outline-text-4" id="text-org85dd2d0">
<div class="org-src-container">
<pre class="src src-j">assert 1924 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-04-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgebbf6d0" class="outline-4">
<h4 id="orgebbf6d0">Solution</h4>
<div class="outline-text-4" id="text-orgebbf6d0">
<div class="org-src-container">
<pre class="src src-j">assert 25925 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-04.txt'</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org85f9935" class="outline-2">
<h2 id="org85f9935"><a href="https://adventofcode.com/2021/day/5">Day 05: Hydrothermal Venture</a></h2>
<div class="outline-text-2" id="text-org85f9935">
<div id="text-table-of-contents">
<ul>
<li><a href="#orgedf3a88">Setup</a></li>
<li><a href="#org0c59d1b">Read data</a></li>
<li><a href="#orgf607455">General function definitions</a>
<ul>
<li><a href="#orgec84e5d">❖ Sequence generator</a></li>
<li><a href="#orge201826">❖ Points</a></li>
<li><a href="#orgceeb0ab">Intersections</a></li>
<li><a href="#orgbd587fe">Filter vertical and horizontal lines</a></li>
</ul>
</li>
<li><a href="#orgf9faad7">Part 1</a>
<ul>
<li><a href="#org7bd4c02">Function definition</a></li>
<li><a href="#org6140ab7">Test</a></li>
<li><a href="#org1cd9c9e">Solution</a></li>
</ul>
</li>
<li><a href="#orgf6fb12c">Part 2</a>
<ul>
<li><a href="#org5e4f867">Function definition</a></li>
<li><a href="#org9c44487">Test</a></li>
<li><a href="#org2572c85">Solution</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgedf3a88" class="outline-3">
<h3 id="orgedf3a88">Setup</h3>
<div class="outline-text-3" id="text-orgedf3a88">
<div class="org-src-container">
<pre class="src src-j">cocurrent <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'day05'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-j">load <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'utils.ijs'</span>  <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">readin</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0c59d1b" class="outline-3">
<h3 id="org0c59d1b">Read data</h3>
<div class="outline-text-3" id="text-org0c59d1b">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">getin</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">".</span><span style="color: #0000ff;">@</span>(rplc<span style="color: #0000ff;">&amp;</span>(<span style="color: #008000;">'-&gt;'</span><span style="color: #ff0000;">;</span><span style="color: #008000;">',:'</span><span style="color: #ff0000;">;</span><span style="color: #008000;">','</span><span style="color: #ff0000;">;</span><span style="color: #008000;">' '</span>)) readin
</pre>
</div>

<p>
Note that &rsquo;-&gt;&rsquo; is replaced with &rsquo;,:&rsquo; so that executing each row casts the <code>(x, y)</code> coordinates in each row to a \(2 \times 2\) matrix. This results in 
an \(N \times 2 \times 2\) matrix for \(N\) points (rows) in the file.
</p>
</div>
</div>

<div id="outline-container-orgf607455" class="outline-3">
<h3 id="orgf607455">General function definitions</h3>
<div class="outline-text-3" id="text-orgf607455">
</div>
<div id="outline-container-orgec84e5d" class="outline-4">
<h4 id="orgec84e5d">❖ Sequence generator</h4>
<div class="outline-text-4" id="text-orgec84e5d">
<p>
Generate sequence in closed interval <code>(x, y)</code>,
</p>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Generate sequence in closed interval (x, y)</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">x &lt; y: Ascending  ]  5 seq 8  =&gt; 5 6 7 8</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">x &gt; y: Descending ] _2 seq _5 =&gt; _2 _3 _4 _5</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">x = y: Constant   ]  0 seq 0  =&gt; 0</span>
<span style="color: #BA36A5;">seq</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[</span> <span style="color: #ff0000;">+</span> (<span style="color: #ff0000;">-</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">*</span> <span style="color: #ff0000;">*</span> <span style="color: #ff0000;">i.</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">&gt;:</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">|</span>)<span style="color: #0000ff;">@</span><span style="color: #ff0000;">-</span>
</pre>
</div>

<pre class="example">
┌──────────────────┬─────────┬───────┐
│_3 seq 4          │7 seq 3  │9 seq 9│
├──────────────────┼─────────┼───────┤
│_3 _2 _1 0 1 2 3 4│7 6 5 4 3│9      │
└──────────────────┴─────────┴───────┘

</pre>

<p>
For 2-element <code>x = (x1, y1)</code> and <code>y = (x2, y2)</code>, <code>seq</code> can be considered to interpolate between the coordinates. 
Of course this only works for horizontal, vertical and 45<sup>o</sup> diagonal lines!
</p>

<pre class="example">
┌───────────────┬───────────────┬───────────────┐
│(0 9) seq (5 9)│(3 2) seq (3 7)│(4 4) seq (8 8)│
├───────────────┼───────────────┼───────────────┤
│0 1 2 3 4 5    │3 3 3 3 3 3    │4 5 6 7 8      │
│9 9 9 9 9 9    │2 3 4 5 6 7    │4 5 6 7 8      │
└───────────────┴───────────────┴───────────────┘

</pre>
</div>
</div>

<div id="outline-container-orge201826" class="outline-4">
<h4 id="orge201826">❖ Points</h4>
<div class="outline-text-4" id="text-orge201826">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Interpolate points across coordinate endpoints</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = N x 2 x 2 matrix of N points</span>
<span style="color: #8D8D84;">NB.         </span><span style="color: #8D8D84; font-style: italic;">2 x 2 submatrices are (x1 y1 ,: x2 y2) coordinates for each point</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Returns 2-column list of interpolated (x, y) pairs for all points</span>
<span style="color: #BA36A5;">pts</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">;</span> _2 <span style="color: #ff0000;">&lt;</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">|:</span><span style="color: #0000ff;">@</span>seq<span style="color: #0000ff;">"</span>1<span style="color: #00ff00;">/\</span><span style="color: #0000ff;">"</span>_1 <span style="color: #ff0000;">]</span>
</pre>
</div>


<pre class="example">
┌───┬─────┐
│y  │pts y│
├───┼─────┤
│0 9│0 9  │
│5 9│1 9  │
│   │2 9  │
│3 2│3 9  │
│3 7│4 9  │
│   │5 9  │
│4 4│3 2  │
│8 8│3 3  │
│   │3 4  │
│   │3 5  │
│   │3 6  │
│   │3 7  │
│   │4 4  │
│   │5 5  │
│   │6 6  │
│   │7 7  │
│   │8 8  │
└───┴─────┘
</pre>
</div>
</div>

<div id="outline-container-orgceeb0ab" class="outline-4">
<h4 id="orgceeb0ab">Intersections</h4>
<div class="outline-text-4" id="text-orgceeb0ab">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Count number of intersections between N lines</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = N x 2 x 2 matrix of N points</span>
<span style="color: #8D8D84;">NB.         </span><span style="color: #8D8D84; font-style: italic;">2 x 2 submatrices are (x1 y1 ,: x2 y2) coordinates for each point</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">x is minimum number of intersections</span>
<span style="color: #BA36A5;">intersect</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">+</span><span style="color: #00ff00;">/</span> <span style="color: #ff0000;">[</span> <span style="color: #ff0000;">&lt;:</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">#</span><span style="color: #00ff00;">/.~</span> pts 
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbd587fe" class="outline-4">
<h4 id="orgbd587fe">Filter vertical and horizontal lines</h4>
<div class="outline-text-4" id="text-orgbd587fe">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Filter coordinates of vertical and horizontal lines</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = N x 2 x 2 matrix of N points</span>
<span style="color: #8D8D84;">NB.         </span><span style="color: #8D8D84; font-style: italic;">2 x 2 submatrices are (x1 y1 ,: x2 y2) coordinates for each point</span>
<span style="color: #BA36A5;">filtvh</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">]</span> <span style="color: #ff0000;">#</span><span style="color: #00ff00;">~</span> (<span style="color: #ff0000;">+.</span><span style="color: #00ff00;">/</span><span style="color: #0000ff;">"</span>1 <span style="color: #0000ff;">@:</span> <span style="color: #ff0000;">=</span><span style="color: #00ff00;">/</span>)<span style="color: #0000ff;">"</span>_1
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf9faad7" class="outline-3">
<h3 id="orgf9faad7">Part 1</h3>
<div class="outline-text-3" id="text-orgf9faad7">
</div>
<div id="outline-container-org7bd4c02" class="outline-4">
<h4 id="org7bd4c02">Function definition</h4>
<div class="outline-text-4" id="text-org7bd4c02">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part1</span><span style="color: #000000;">=:</span> 2<span style="color: #0000ff;">&amp;</span>intersect <span style="color: #0000ff;">@</span> filtvh
</pre>
</div>
</div>
</div>

<div id="outline-container-org6140ab7" class="outline-4">
<h4 id="org6140ab7">Test</h4>
<div class="outline-text-4" id="text-org6140ab7">
<div class="org-src-container">
<pre class="src src-j">assert 5 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-05-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1cd9c9e" class="outline-4">
<h4 id="org1cd9c9e">Solution</h4>
<div class="outline-text-4" id="text-org1cd9c9e">
<div class="org-src-container">
<pre class="src src-j">assert 7473 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-05.txt'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf6fb12c" class="outline-3">
<h3 id="orgf6fb12c">Part 2</h3>
<div class="outline-text-3" id="text-orgf6fb12c">
</div>
<div id="outline-container-org5e4f867" class="outline-4">
<h4 id="org5e4f867">Function definition</h4>
<div class="outline-text-4" id="text-org5e4f867">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part2</span><span style="color: #000000;">=:</span> 2<span style="color: #0000ff;">&amp;</span>intersect
</pre>
</div>
</div>
</div>

<div id="outline-container-org9c44487" class="outline-4">
<h4 id="org9c44487">Test</h4>
<div class="outline-text-4" id="text-org9c44487">
<div class="org-src-container">
<pre class="src src-j">assert 12 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-05-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2572c85" class="outline-4">
<h4 id="org2572c85">Solution</h4>
<div class="outline-text-4" id="text-org2572c85">
<div class="org-src-container">
<pre class="src src-j">assert 24164 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-05.txt'</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org94490a0" class="outline-2">
<h2 id="org94490a0"><a href="https://adventofcode.com/2021/day/6">Day 06: Lanternfish</a></h2>
<div class="outline-text-2" id="text-org94490a0">
<div id="text-table-of-contents">
<ul>
<li><a href="#org7f14399">Setup</a></li>
<li><a href="#org459d7e3">Read data</a></li>
<li><a href="#org24e8d31">General function definitions</a>
<ul>
<li><a href="#org597013f">Stochastic matrix</a></li>
<li><a href="#org11a3c8d">Matrix operations</a></li>
<li><a href="#orgd0f6e9d">Number of fish</a></li>
</ul>
</li>
<li><a href="#org7964590">Part 1</a>
<ul>
<li><a href="#orgd8cf4c3">Function definition</a></li>
<li><a href="#org7333a9a">Test</a></li>
<li><a href="#org679accb">Solution</a></li>
</ul>
</li>
<li><a href="#orge3a93f4">Part 2</a>
<ul>
<li><a href="#org3a35f06">Function definition</a></li>
<li><a href="#org7fb3b6e">Test</a></li>
<li><a href="#org10c9708">Solution</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org7f14399" class="outline-3">
<h3 id="org7f14399">Setup</h3>
<div class="outline-text-3" id="text-org7f14399">
<div class="org-src-container">
<pre class="src src-j">cocurrent <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'day06'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-j">load <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'utils.ijs'</span>  <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">readin</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org459d7e3" class="outline-3">
<h3 id="org459d7e3">Read data</h3>
<div class="outline-text-3" id="text-org459d7e3">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">getin</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">,</span> <span style="color: #ff0000;">".</span> readin
</pre>
</div>
</div>
</div>

<div id="outline-container-org24e8d31" class="outline-3">
<h3 id="org24e8d31">General function definitions</h3>
<div class="outline-text-3" id="text-org24e8d31">
</div>
<div id="outline-container-org597013f" class="outline-4">
<h4 id="org597013f">Stochastic matrix</h4>
<div class="outline-text-4" id="text-org597013f">
<p>
This class of problems is most easily solved using a <a href="https://en.wikipedia.org/wiki/Stochastic_matrix">stochastic matrix</a>. The function below defines a stochastic matrix per conditions of the problem,
</p>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">stochastic matrix</span>
<span style="color: #BA36A5;">stoctrix</span><span style="color: #000000;">=:</span> (1 0) <span style="color: #ff0000;">,</span><span style="color: #00ff00;">~</span> (0 0 0 0 0 0 1 0) <span style="color: #ff0000;">,.</span> (<span style="color: #ff0000;">e.</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">i.</span> 8)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-j">stoctrix
</pre>
</div>

<pre class="example">
0 1 0 0 0 0 0 0 0
0 0 1 0 0 0 0 0 0
0 0 0 1 0 0 0 0 0
0 0 0 0 1 0 0 0 0
0 0 0 0 0 1 0 0 0
0 0 0 0 0 0 1 0 0
1 0 0 0 0 0 0 1 0
0 0 0 0 0 0 0 0 1
1 0 0 0 0 0 0 0 0

</pre>
</div>
</div>

<div id="outline-container-org11a3c8d" class="outline-4">
<h4 id="org11a3c8d">Matrix operations</h4>
<div class="outline-text-4" id="text-org11a3c8d">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Matrix product</span>
<span style="color: #BA36A5;">mp</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">+</span><span style="color: #00ff00;">/</span> <span style="color: #00ff00;">.</span> <span style="color: #ff0000;">*</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Raise matrix to nth power</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Source: https://code.jsoftware.com/wiki/Essays/Repeated_Squaring</span>
<span style="color: #BA36A5;">mpow</span><span style="color: #000000;">=:</span> 4 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'mp/ mp~^:(I.|.#:y) x'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd0f6e9d" class="outline-4">
<h4 id="orgd0f6e9d">Number of fish</h4>
<div class="outline-text-4" id="text-orgd0f6e9d">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Count number of fish after N generations</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">x = input/start state</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = generations (integer)</span>
<span style="color: #BA36A5;">nfish</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">+</span><span style="color: #00ff00;">/</span> stoctrix<span style="color: #0000ff;">&amp;</span>mpow<span style="color: #0000ff;">@</span><span style="color: #ff0000;">]</span> mp (<span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">&lt;:</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">#</span><span style="color: #00ff00;">/.~</span> (<span style="color: #ff0000;">i.</span>9) <span style="color: #ff0000;">,</span> <span style="color: #ff0000;">[</span>)
</pre>
</div>

<p>
Reading from right to left, <code>nfish</code> works as follows, 
</p>

<ul class="org-ul">
<li><code>([: &lt;:@#/.~ (i.9) , [)</code>: Count number of fish in input grouped by <code>x</code> (age)</li>
<li><code>stoctrix&amp;mpow@] mp</code>: Multiply grouped fish count by stochastic matrix after <code>y</code> generations</li>
<li><code>+/</code>: Total fish after <code>y</code> generations</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org7964590" class="outline-3">
<h3 id="org7964590">Part 1</h3>
<div class="outline-text-3" id="text-org7964590">
</div>
<div id="outline-container-orgd8cf4c3" class="outline-4">
<h4 id="orgd8cf4c3">Function definition</h4>
<div class="outline-text-4" id="text-orgd8cf4c3">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part1</span><span style="color: #000000;">=:</span> nfish<span style="color: #0000ff;">&amp;</span>80
</pre>
</div>
</div>
</div>

<div id="outline-container-org7333a9a" class="outline-4">
<h4 id="org7333a9a">Test</h4>
<div class="outline-text-4" id="text-org7333a9a">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-06-example.txt'</span>
assert 26 <span style="color: #ff0000;">=</span> inx nfish 18 
assert 5934 <span style="color: #ff0000;">=</span> part1 inx
</pre>
</div>
</div>
</div>

<div id="outline-container-org679accb" class="outline-4">
<h4 id="org679accb">Solution</h4>
<div class="outline-text-4" id="text-org679accb">
<div class="org-src-container">
<pre class="src src-j">assert 360761 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-06.txt'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge3a93f4" class="outline-3">
<h3 id="orge3a93f4">Part 2</h3>
<div class="outline-text-3" id="text-orge3a93f4">
</div>
<div id="outline-container-org3a35f06" class="outline-4">
<h4 id="org3a35f06">Function definition</h4>
<div class="outline-text-4" id="text-org3a35f06">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part2</span><span style="color: #000000;">=:</span> nfish<span style="color: #0000ff;">&amp;</span>256
</pre>
</div>
</div>
</div>

<div id="outline-container-org7fb3b6e" class="outline-4">
<h4 id="org7fb3b6e">Test</h4>
<div class="outline-text-4" id="text-org7fb3b6e">
<div class="org-src-container">
<pre class="src src-j">assert 26984457539 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-06-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org10c9708" class="outline-4">
<h4 id="org10c9708">Solution</h4>
<div class="outline-text-4" id="text-org10c9708">
<div class="org-src-container">
<pre class="src src-j">assert 1632779838045 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-06.txt'</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org405ecce" class="outline-2">
<h2 id="org405ecce"><a href="https://adventofcode.com/2021/day/7">Day 07: The Treachery of Whales</a></h2>
<div class="outline-text-2" id="text-org405ecce">
<div id="text-table-of-contents">
<ul>
<li><a href="#orge4de8f5">Setup</a></li>
<li><a href="#org36b0489">Read data</a></li>
<li><a href="#org08d3cfd">Part 1</a>
<ul>
<li><a href="#org56f946e">Function definition</a></li>
<li><a href="#orgc8e35d5">Test</a></li>
<li><a href="#orgf4b7ad0">Solution</a></li>
</ul>
</li>
<li><a href="#orgc30080b">Part 2</a>
<ul>
<li><a href="#orga503c38">Function definition</a></li>
<li><a href="#org866bb31">Test</a></li>
<li><a href="#orgf64685d">Solution</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orge4de8f5" class="outline-3">
<h3 id="orge4de8f5">Setup</h3>
<div class="outline-text-3" id="text-orge4de8f5">
<div class="org-src-container">
<pre class="src src-j">cocurrent <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'day07'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-j">load <span style="color: #008000;">'stats/base'</span>
load <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'utils.ijs'</span>  <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">readin</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org36b0489" class="outline-3">
<h3 id="org36b0489">Read data</h3>
<div class="outline-text-3" id="text-org36b0489">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">getin</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">,</span> <span style="color: #ff0000;">".</span> readin
</pre>
</div>
</div>
</div>

<div id="outline-container-org08d3cfd" class="outline-3">
<h3 id="org08d3cfd">Part 1</h3>
<div class="outline-text-3" id="text-org08d3cfd">
</div>
<div id="outline-container-org56f946e" class="outline-4">
<h4 id="org56f946e">Function definition</h4>
<div class="outline-text-4" id="text-org56f946e">
<p>
See this <a href="https://math.stackexchange.com/questions/318381/on-a-1-d-line-the-point-that-minimizes-the-sum-of-the-distances-is-the-median">stackexchange</a> question for the explanation of why median minimizes the distance on a 1-D line. 
</p>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part1</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">+</span><span style="color: #00ff00;">/</span> <span style="color: #ff0000;">|</span><span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">]</span> <span style="color: #ff0000;">-</span> median)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc8e35d5" class="outline-4">
<h4 id="orgc8e35d5">Test</h4>
<div class="outline-text-4" id="text-orgc8e35d5">
<div class="org-src-container">
<pre class="src src-j">assert 37 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-07-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf4b7ad0" class="outline-4">
<h4 id="orgf4b7ad0">Solution</h4>
<div class="outline-text-4" id="text-orgf4b7ad0">
<div class="org-src-container">
<pre class="src src-j">assert 329389 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-07.txt'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc30080b" class="outline-3">
<h3 id="orgc30080b">Part 2</h3>
<div class="outline-text-3" id="text-orgc30080b">
</div>
<div id="outline-container-orga503c38" class="outline-4">
<h4 id="orga503c38">Function definition</h4>
<div class="outline-text-4" id="text-orga503c38">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part2</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">x:</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">+</span><span style="color: #00ff00;">/</span> <span style="color: #ff0000;">-:</span><span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">&gt;:</span> <span style="color: #ff0000;">*</span> <span style="color: #ff0000;">]</span>)<span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">]</span> <span style="color: #ff0000;">|</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">-</span> <span style="color: #ff0000;">&lt;.</span><span style="color: #0000ff;">@</span>mean)
</pre>
</div>

<p>
Reading from right to left, this works as follows,
</p>

<ul class="org-ul">
<li><code>-:@(&gt;: * ])@(] |@- &lt;.@mean)</code>
<ul class="org-ul">
<li><code>(] |@- &lt;.@mean)</code>: Mean absolute deviation = distance from best horizontal position
<ul class="org-ul">
<li><code>&lt;.@mean</code>: Largest integer not tolerantly exceeding the mean</li>
</ul></li>
<li><code>-:@(&gt;: * ])</code>: Fuel cost for each crab = \(n (n + 1)/2\)</li>
</ul></li>
<li><code>+/</code>: Total fuel cost</li>
<li><code>x:</code>: Extended integer (full precision)</li>
</ul>
</div>
</div>

<div id="outline-container-org866bb31" class="outline-4">
<h4 id="org866bb31">Test</h4>
<div class="outline-text-4" id="text-org866bb31">
<div class="org-src-container">
<pre class="src src-j">assert 170 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-07-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf64685d" class="outline-4">
<h4 id="orgf64685d">Solution</h4>
<div class="outline-text-4" id="text-orgf64685d">
<div class="org-src-container">
<pre class="src src-j">assert 86397080 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-07.txt'</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org03abd83" class="outline-2">
<h2 id="org03abd83"><a href="https://adventofcode.com/2021/day/8">Day 08: Seven Segment Search</a></h2>
<div class="outline-text-2" id="text-org03abd83">
<div id="text-table-of-contents">
<ul>
<li><a href="#orgac453e6">Setup</a></li>
<li><a href="#orgb0c37fb">Read data</a></li>
<li><a href="#org9067775">Part 1</a>
<ul>
<li><a href="#orge69e36f">Function definitions</a></li>
<li><a href="#orgb19f8be">Test</a></li>
<li><a href="#org5a5d1ef">Solution</a></li>
</ul>
</li>
<li><a href="#orgddb0969">Part 2</a>
<ul>
<li><a href="#orgea4d4f1">Unique identifiers</a></li>
<li><a href="#org13a0db5">Function definitions</a></li>
<li><a href="#orgd14353b">Test</a></li>
<li><a href="#org8c3c8bf">Solution</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgac453e6" class="outline-3">
<h3 id="orgac453e6">Setup</h3>
<div class="outline-text-3" id="text-orgac453e6">
<div class="org-src-container">
<pre class="src src-j">cocurrent <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'day08'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-j">load <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'utils.ijs'</span>  <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">readin</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb0c37fb" class="outline-3">
<h3 id="orgb0c37fb">Read data</h3>
<div class="outline-text-3" id="text-orgb0c37fb">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">getin</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">/:</span><span style="color: #00ff00;">~</span><span style="color: #0000ff;">&amp;.</span><span style="color: #ff0000;">&gt;</span> <span style="color: #ff0000;">;:</span> readin
</pre>
</div>

<p>
To simplify the solution, the random-ordered entries are sorted alphabetically. 
</p>
</div>
</div>

<div id="outline-container-org9067775" class="outline-3">
<h3 id="org9067775">Part 1</h3>
<div class="outline-text-3" id="text-org9067775">
</div>
<div id="outline-container-orge69e36f" class="outline-4">
<h4 id="orge69e36f">Function definitions</h4>
<div class="outline-text-4" id="text-orge69e36f">
<p>
This solution is from <a href="https://github.com/jitwit/aoc/blob/a/J/21/08.ijs">jitwit</a>.
</p>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Count number of digits of given length</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = boxed list of coded digits</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">x = list of digit lengths</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">output is count of digits of lengths x in y</span>
<span style="color: #BA36A5;">ndiglen</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">+</span><span style="color: #00ff00;">/</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">,</span> <span style="color: #ff0000;">[</span> <span style="color: #ff0000;">e.</span><span style="color: #00ff00;">~</span> <span style="color: #ff0000;">#</span><span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">&gt;</span> <span style="color: #0000ff;">@</span> <span style="color: #ff0000;">]</span>
</pre>
</div>

<p>
Reading from right to left, <code>ndiglen</code> works as follows,
</p>

<ul class="org-ul">
<li><code>#&amp;&gt; @ ]</code>: Number of characters in each entry of <code>y</code></li>
<li><code>[ e.~</code>: Flag all entry-lengths in <code>x</code></li>
<li><code>[: +/ [: ,</code>: Flatten matrix and sum all elements</li>
</ul>


<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part1</span><span style="color: #000000;">=:</span> (2 3 4 7) ndiglen _4<span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">{.</span><span style="color: #0000ff;">"</span>1<span style="color: #0000ff;">@</span><span style="color: #ff0000;">]</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb19f8be" class="outline-4">
<h4 id="orgb19f8be">Test</h4>
<div class="outline-text-4" id="text-orgb19f8be">
<div class="org-src-container">
<pre class="src src-j">assert 26 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-08-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5a5d1ef" class="outline-4">
<h4 id="org5a5d1ef">Solution</h4>
<div class="outline-text-4" id="text-org5a5d1ef">
<div class="org-src-container">
<pre class="src src-j">assert 284 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-08.txt'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgddb0969" class="outline-3">
<h3 id="orgddb0969">Part 2</h3>
<div class="outline-text-3" id="text-orgddb0969">
</div>
<div id="outline-container-orgea4d4f1" class="outline-4">
<h4 id="orgea4d4f1">Unique identifiers</h4>
<div class="outline-text-4" id="text-orgea4d4f1">
<p>
Based on logic from: <a href="https://github.com/jitwit/aoc/blob/a/J/21/08.ijs">https://github.com/jitwit/aoc/blob/a/J/21/08.ijs</a>.
</p>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Table of unique identifiers</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">A digit can be uniquely identified by length, </span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">intersection with 1 and intersection with 4</span>
<span style="color: #BA36A5;">tbluids</span><span style="color: #000000;">=:</span> _3 <span style="color: #ff0000;">]</span><span style="color: #00ff00;">\</span> 6 2 3 2 2 2 5 1 2 5 2 3 4 2 4 5 1 3 6 1 3 3 2 2 7 2 4 6 2 4
</pre>
</div>

<pre class="example">
6 2 3
2 2 2
5 1 2
5 2 3
4 2 4
5 1 3
6 1 3
3 2 2
7 2 4
6 2 4
</pre>

<p>
The first column is length. Second and third columns are intersections with 1 and 4.
</p>
</div>
</div>

<div id="outline-container-org13a0db5" class="outline-4">
<h4 id="org13a0db5">Function definitions</h4>
<div class="outline-text-4" id="text-org13a0db5">
</div>
<div id="outline-container-orgbf050c5" class="outline-5">
<h5 id="orgbf050c5">Get identifiers</h5>
<div class="outline-text-5" id="text-orgbf050c5">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Get identifiers of output x based on encodings in y</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = boxed list of outputs</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">x = boxed list of encoded entries (#y = 10)</span>
<span style="color: #BA36A5;">getids</span><span style="color: #000000;">=:</span> (<span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">#</span><span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">&gt;</span> <span style="color: #ff0000;">]</span>) <span style="color: #ff0000;">,.</span> <span style="color: #ff0000;">]</span> <span style="color: #ff0000;">+</span><span style="color: #00ff00;">/</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">e.</span><span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">&gt;</span><span style="color: #00ff00;">/</span> (0 2<span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">{</span>)<span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">/:</span> <span style="color: #ff0000;">#</span><span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">&gt;</span>)<span style="color: #0000ff;">@</span><span style="color: #ff0000;">[</span>
</pre>
</div>

<p>
Reading from right to left, <code>getids</code> works as follows,
</p>

<ul class="org-ul">
<li><code>] +/@e.&amp;&gt;/ (0 2&amp;{)@(/: #&amp;&gt;)@[</code>: Get intersections of each output entry in <code>y</code> with 1 and 4 in encodings <code>x</code>
<ul class="org-ul">
<li><code>(0 2&amp;{)@(/: #&amp;&gt;)@[</code>: Sort encodings <code>y</code> by length and select digits 1 and 4</li>
</ul></li>
<li><code>([: #&amp;&gt; ]) ,.</code>: Prepend column with lengths of output entries</li>
<li>Result is a <code>(#y) x 3</code> matrix,
<ul class="org-ul">
<li>First column are the lengths of output entries</li>
<li>Second and third columns are intersections of corresponding outputs with 1 and 4</li>
</ul></li>
</ul>

<pre class="example">
┌───────────┬────────────────────────────────────────────────────────────┐
│e=. 10&amp;{. y│┌──┬───────┬──────┬──────┬────┬─────┬──────┬─────┬─────┬───┐│
│           ││be│abcdefg│bcdefg│acdefg│bceg│cdefg│abdefg│bcdef│abcdf│bde││
│           │└──┴───────┴──────┴──────┴────┴─────┴──────┴─────┴─────┴───┘│
├───────────┼────────────────────────────────────────────────────────────┤
│o=. _4&amp;{. y│┌───────┬─────┬──────┬────┐                                 │
│           ││abcdefg│bcdef│bcdefg│bceg│                                 │
│           │└───────┴─────┴──────┴────┘                                 │
└───────────┴────────────────────────────────────────────────────────────┘

</pre>

<pre class="example">
┌────────────────┬────────────────────────────────────────────────────────────┐
│s=. (/: #&amp;&gt;) e  │┌──┬───┬────┬─────┬─────┬─────┬──────┬──────┬──────┬───────┐│
│                ││be│bde│bceg│cdefg│bcdef│abcdf│bcdefg│acdefg│abdefg│abcdefg││
│                │└──┴───┴────┴─────┴─────┴─────┴──────┴──────┴──────┴───────┘│
├────────────────┼────────────────────────────────────────────────────────────┤
│d=. (0 2&amp;{) s   │┌──┬────┐                                                   │
│                ││be│bceg│                                                   │
│                │└──┴────┘                                                   │
├────────────────┼────────────────────────────────────────────────────────────┤
│i=. o +/@e.&amp;&gt;/ d│2 4                                                         │
│                │2 3                                                         │
│                │2 4                                                         │
│                │2 4                                                         │
├────────────────┼────────────────────────────────────────────────────────────┤
│(#&amp;&gt; o) ,. i    │7 2 4                                                       │
│                │5 2 3                                                       │
│                │6 2 4                                                       │
│                │4 2 4                                                       │
├────────────────┼────────────────────────────────────────────────────────────┤
│e getids o      │7 2 4                                                       │
│                │5 2 3                                                       │
│                │6 2 4                                                       │
│                │4 2 4                                                       │
└────────────────┴────────────────────────────────────────────────────────────┘
</pre>
</div>
</div>

<div id="outline-container-org1502994" class="outline-5">
<h5 id="org1502994">Decode</h5>
<div class="outline-text-5" id="text-org1502994">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Return decimal number of output in y</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = encodings (first 10 columns) and outputs to decode (last four columns)</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">x = lookup table with unique identifiers for digits</span>
<span style="color: #BA36A5;">decode</span><span style="color: #000000;">=:</span> 10 <span style="color: #ff0000;">#.</span> <span style="color: #ff0000;">[</span> <span style="color: #ff0000;">i.</span> (10<span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">{.</span> getids _4<span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">{.</span>)<span style="color: #0000ff;">@</span><span style="color: #ff0000;">]</span>
</pre>
</div>

<p>
Reading from right to left, <code>decode</code> works as follows,
</p>

<ul class="org-ul">
<li><code>[ i. (10&amp;{. getids _4&amp;{.)@]</code>: Find digits in output of <code>y</code> in <code>x</code> (table of identifiers)
<ul class="org-ul">
<li><code>(10&amp;{. getids _4&amp;{.)@]</code>: Get identifiers for digits in output of <code>y</code> (last four columns) using encodings in <code>y</code> (first 10 columns)</li>
</ul></li>
<li><code>10 #.</code>: Convert individual digits to decimal number</li>
</ul>
</div>
</div>

<div id="outline-container-orgd1815e0" class="outline-5">
<h5 id="orgd1815e0">Total</h5>
<div class="outline-text-5" id="text-orgd1815e0">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part2</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">+</span><span style="color: #00ff00;">/</span> (tbluids decode <span style="color: #ff0000;">]</span>)<span style="color: #0000ff;">"</span>1
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd14353b" class="outline-4">
<h4 id="orgd14353b">Test</h4>
<div class="outline-text-4" id="text-orgd14353b">
<div class="org-src-container">
<pre class="src src-j">assert 61229 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-08-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8c3c8bf" class="outline-4">
<h4 id="org8c3c8bf">Solution</h4>
<div class="outline-text-4" id="text-org8c3c8bf">
<div class="org-src-container">
<pre class="src src-j">assert 973499 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-08.txt'</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org2ad00a6" class="outline-2">
<h2 id="org2ad00a6"><a href="https://adventofcode.com/2021/day/9">Day 09: Smoke Basin</a></h2>
<div class="outline-text-2" id="text-org2ad00a6">
<div id="text-table-of-contents">
<ul>
<li><a href="#orgb53d231">Setup</a></li>
<li><a href="#orga37aa03">Read data</a></li>
<li><a href="#org466a64a">Part 1</a>
<ul>
<li><a href="#org26d91ee">Function definitions</a></li>
<li><a href="#org50655c7">Test</a></li>
<li><a href="#org6ff5767">Solution</a></li>
</ul>
</li>
<li><a href="#orgf0f6d00">Part 2</a>
<ul>
<li><a href="#org94a7554">Function definitions</a></li>
<li><a href="#org4d150be">Test</a></li>
<li><a href="#orgc56f136">Solution</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgb53d231" class="outline-3">
<h3 id="orgb53d231">Setup</h3>
<div class="outline-text-3" id="text-orgb53d231">
<div class="org-src-container">
<pre class="src src-j">cocurrent <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'day09'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-j">load <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'utils.ijs'</span>  <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">readin</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga37aa03" class="outline-3">
<h3 id="orga37aa03">Read data</h3>
<div class="outline-text-3" id="text-orga37aa03">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">getin</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">".</span><span style="color: #0000ff;">"</span>0 readin
</pre>
</div>
</div>
</div>

<div id="outline-container-org466a64a" class="outline-3">
<h3 id="org466a64a">Part 1</h3>
<div class="outline-text-3" id="text-org466a64a">
</div>
<div id="outline-container-org26d91ee" class="outline-4">
<h4 id="org26d91ee">Function definitions</h4>
<div class="outline-text-4" id="text-org26d91ee">
<p>
This solution follows the approach in <a href="https://www.jsoftware.com/help/learning/31.htm">Golden Rule Example 2: Conway&rsquo;s &ldquo;Life&rdquo;</a>,
</p>
</div>

<div id="outline-container-orgb5b3583" class="outline-5">
<h5 id="orgb5b3583">Low points</h5>
<div class="outline-text-5" id="text-orgb5b3583">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Find low points in matrix y</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Low points = locations that are lower than any of </span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">its adjacent (up, down, left, and right) locations</span>
<span style="color: #BA36A5;">lowpoints</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">]</span> <span style="color: #ff0000;">&lt;</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">&lt;.</span><span style="color: #00ff00;">/</span> (_1<span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">*</span> <span style="color: #ff0000;">,</span> <span style="color: #ff0000;">]</span>)<span style="color: #0000ff;">@</span><span style="color: #ff0000;">=</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">i.</span><span style="color: #0000ff;">@</span>2<span style="color: #ff0000;">:</span> (<span style="color: #ff0000;">|.</span><span style="color: #0000ff;">!.</span>9) <span style="color: #ff0000;">]</span>
</pre>
</div>

<pre class="example">
┌───────────────────┬───────────────────┐
│y                  │lowpoints y        │
├───────────────────┼───────────────────┤
│2 1 9 9 9 4 3 2 1 0│0 1 0 0 0 0 0 0 0 1│
│3 9 8 7 8 9 4 9 2 1│0 0 0 0 0 0 0 0 0 0│
│9 8 5 6 7 8 9 8 9 2│0 0 1 0 0 0 0 0 0 0│
│8 7 6 7 8 9 6 7 8 9│0 0 0 0 0 0 0 0 0 0│
│9 8 9 9 9 6 5 6 7 8│0 0 0 0 0 0 1 0 0 0│
└───────────────────┴───────────────────┘

</pre>
</div>
</div>

<div id="outline-container-org1808c78" class="outline-5">
<h5 id="org1808c78">Risk level</h5>
<div class="outline-text-5" id="text-org1808c78">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part1</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">+</span><span style="color: #00ff00;">/</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">,</span> <span style="color: #ff0000;">&gt;:</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">]</span> <span style="color: #ff0000;">*</span> lowpoints
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org50655c7" class="outline-4">
<h4 id="org50655c7">Test</h4>
<div class="outline-text-4" id="text-org50655c7">
<div class="org-src-container">
<pre class="src src-j">assert 15 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-09-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6ff5767" class="outline-4">
<h4 id="org6ff5767">Solution</h4>
<div class="outline-text-4" id="text-org6ff5767">
<div class="org-src-container">
<pre class="src src-j">assert 548 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-09.txt'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf0f6d00" class="outline-3">
<h3 id="orgf0f6d00">Part 2</h3>
<div class="outline-text-3" id="text-orgf0f6d00">
</div>
<div id="outline-container-org94a7554" class="outline-4">
<h4 id="org94a7554">Function definitions</h4>
<div class="outline-text-4" id="text-org94a7554">
</div>
<div id="outline-container-orga05c38b" class="outline-5">
<h5 id="orga05c38b">Find adjacent regions</h5>
<div class="outline-text-5" id="text-orga05c38b">
<p>
The problem is greatly simplified by using <code>findadj</code> from the <a href="http://www.jsoftware.com/pipermail/general/2005-August/023886.html">Jforum</a>.
</p>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">findadj</span><span style="color: #000000;">=:</span> (<span style="color: #ff0000;">|.</span><span style="color: #0000ff;">"</span>1<span style="color: #0000ff;">@</span><span style="color: #ff0000;">|:</span><span style="color: #0000ff;">@:</span><span style="color: #ff0000;">&gt;.</span> <span style="color: #ff0000;">*</span> <span style="color: #ff0000;">*</span> 1<span style="color: #0000ff;">&amp;</span>(<span style="color: #ff0000;">|.</span><span style="color: #0000ff;">!.</span>0))<span style="color: #0000ff;">^:</span>4<span style="color: #0000ff;">^:</span>_ <span style="color: #0000ff;">@</span> (<span style="color: #ff0000;">*&gt;:</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">i.</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">$</span>)
</pre>
</div>

<pre class="example">
┌─────────────────┬─────────────────────────┐
│y                │findadj y                │
├─────────────────┼─────────────────────────┤
│1 1 0 0 0 1 1 0 0│12 12  0 0  0 45 45  0  0│
│1 1 1 0 0 0 1 1 0│12 12 12 0  0  0 45 45  0│
│0 0 0 0 1 0 0 1 0│ 0  0  0 0 45  0  0 45  0│
│0 0 0 0 1 1 1 1 1│ 0  0  0 0 45 45 45 45 45│
│1 0 0 0 1 1 0 0 1│37  0  0 0 45 45  0  0 45│
└─────────────────┴─────────────────────────┘

</pre>
</div>
</div>

<div id="outline-container-orga8bed57" class="outline-5">
<h5 id="orga8bed57">Basin sizes</h5>
<div class="outline-text-5" id="text-orga8bed57">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Basin sizes in descending order</span>
<span style="color: #BA36A5;">bsizes</span><span style="color: #000000;">=:</span> (<span style="color: #ff0000;">\:</span><span style="color: #00ff00;">~</span>)<span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">#</span><span style="color: #00ff00;">/.~</span>)<span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">]</span> <span style="color: #ff0000;">#</span><span style="color: #00ff00;">~</span> 0 <span style="color: #ff0000;">~:</span> <span style="color: #ff0000;">]</span>) <span style="color: #ff0000;">,</span><span style="color: #0000ff;">@</span>findadj<span style="color: #0000ff;">@</span>(9<span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">~:</span>)
</pre>
</div>

<p>
Reading from right to left, <code>bsizes</code> works as follows,
</p>

<ul class="org-ul">
<li><code>,@findadj@(9&amp;~:)</code>:
<ul class="org-ul">
<li><code>(9&amp;~:)</code>: Flag all heights not equal to 9.</li>
<li><code>findadj</code>: Mark adjacent regions with unique numbers.</li>
<li><code>,</code>: Flatten matrix.</li>
</ul></li>
<li><code>(\:~)@(#/.~)@(] #~ 0 ~: ])</code>:
<ul class="org-ul">
<li><code>(] #~ 0 ~: ])</code>: Remove 0&rsquo;s = region boundaries.</li>
<li><code>(#/.~)</code>: Count number of points in each region.</li>
<li><code>(\:~)</code>: Sort counts in descending order.</li>
</ul></li>
</ul>

<pre class="example">
┌─────────────────────┬───────────────────────────────────────────────┐
│y                    │2 9 0 8 9 1                                    │
│                     │6 9 5 7 9 4                                    │
│                     │4 9 3 5 2 9                                    │
│                     │0 8 9 1 6 9                                    │
├─────────────────────┼───────────────────────────────────────────────┤
│r =. (9&amp;~:) y        │1 0 1 1 0 1                                    │
│                     │1 0 1 1 0 1                                    │
│                     │1 0 1 1 1 0                                    │
│                     │1 1 0 1 1 0                                    │
├─────────────────────┼───────────────────────────────────────────────┤
│t=. findadj r        │20  0 23 23  0 12                              │
│                     │20  0 23 23  0 12                              │
│                     │20  0 23 23 23  0                              │
│                     │20 20  0 23 23  0                              │
├─────────────────────┼───────────────────────────────────────────────┤
│s=. (] #~ 0 ~: ]) , t│20 23 23 12 20 23 23 12 20 23 23 23 20 20 23 23│
├─────────────────────┼───────────────────────────────────────────────┤
│b=. #/.~ s           │5 9 2                                          │
├─────────────────────┼───────────────────────────────────────────────┤
│\:~ b                │9 5 2                                          │
├─────────────────────┼───────────────────────────────────────────────┤
│bsizes y             │9 5 2                                          │
└─────────────────────┴───────────────────────────────────────────────┘
</pre>
</div>
</div>

<div id="outline-container-org4256743" class="outline-5">
<h5 id="org4256743">Three largest basins</h5>
<div class="outline-text-5" id="text-org4256743">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part2</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">*</span><span style="color: #00ff00;">/</span> 3<span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">{.</span> bsizes
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4d150be" class="outline-4">
<h4 id="org4d150be">Test</h4>
<div class="outline-text-4" id="text-org4d150be">
<div class="org-src-container">
<pre class="src src-j">assert 1134 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-09-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc56f136" class="outline-4">
<h4 id="orgc56f136">Solution</h4>
<div class="outline-text-4" id="text-orgc56f136">
<div class="org-src-container">
<pre class="src src-j">assert 786048 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-09.txt'</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf0092ed" class="outline-2">
<h2 id="orgf0092ed"><a href="https://adventofcode.com/2021/day/10">Day 10: Syntax Scoring</a></h2>
<div class="outline-text-2" id="text-orgf0092ed">
<div id="text-table-of-contents">
<ul>
<li><a href="#orgababbaa">Setup</a></li>
<li><a href="#org90e65f8">General function definitions</a>
<ul>
<li><a href="#orgb8b6074">Read data</a></li>
</ul>
</li>
<li><a href="#orgfd5e1c8">Part 1</a>
<ul>
<li><a href="#org0965680">Function definitions</a></li>
<li><a href="#org7575ac8">Test</a></li>
<li><a href="#orgffa526c">Solution</a></li>
</ul>
</li>
<li><a href="#org175a130">Part 2</a>
<ul>
<li><a href="#org454fdfc">Function definition</a></li>
<li><a href="#org79485c5">Test</a></li>
<li><a href="#org7f05678">Solution</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgababbaa" class="outline-3">
<h3 id="orgababbaa">Setup</h3>
<div class="outline-text-3" id="text-orgababbaa">
<div class="org-src-container">
<pre class="src src-j">cocurrent <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'day10'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-j">load <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'utils.ijs'</span>  <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">readin</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org90e65f8" class="outline-3">
<h3 id="org90e65f8">General function definitions</h3>
<div class="outline-text-3" id="text-org90e65f8">
</div>
<div id="outline-container-org0369794" class="outline-5">
<h5 id="org0369794">Pairs</h5>
<div class="outline-text-5" id="text-org0369794">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">pairs</span><span style="color: #000000;">=:</span> _2 <span style="color: #ff0000;">[</span><span style="color: #00ff00;">\</span> <span style="color: #008000;">'()[]{}&lt;&gt;'</span>
</pre>
</div>

<pre class="example">
()
[]
{}
&lt;&gt;

</pre>
</div>
</div>

<div id="outline-container-org1a12c1f" class="outline-5">
<h5 id="org1a12c1f">❖ Remove characters</h5>
<div class="outline-text-5" id="text-org1a12c1f">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Replace characters with empty string</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = input string</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">x = boxed list of characters to remove</span>
<span style="color: #BA36A5;">rmchars</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">]</span> rplc <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">,</span> (<span style="color: #ff0000;">&lt;</span><span style="color: #008000;">''</span>) <span style="color: #ff0000;">,.</span><span style="color: #00ff00;">~</span> <span style="color: #ff0000;">[</span>
</pre>
</div>

<p>
Reading from right to left, <code>rmchars</code> works as follows,
</p>

<ul class="org-ul">
<li><code>] rplc [: , (&lt;'') ,.~ [</code>: Replace all characters of <code>x</code> in <code>y</code> with blank character ⇒ remove characters in <code>x</code> from <code>y</code>
<ul class="org-ul">
<li><code>[: , (&lt;'') ,.~ [</code>: Intersperse blank character <code>''</code> with <code>x</code></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orga157f8d" class="outline-5">
<h5 id="orga157f8d">Filter corrupt or incomplete entries</h5>
<div class="outline-text-5" id="text-orga157f8d">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Filter corrupt or incomplete entries</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = input with all pairs removed from each entry</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">x = 0 (incomplete) and 1 (corrupt)</span>
<span style="color: #BA36A5;">filterr</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">]</span> <span style="color: #ff0000;">#</span><span style="color: #00ff00;">~</span> <span style="color: #ff0000;">[</span> <span style="color: #ff0000;">=</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">+.</span><span style="color: #00ff00;">/</span><span style="color: #0000ff;">"</span>1 ((<span style="color: #ff0000;">{:</span><span style="color: #0000ff;">"</span>1 pairs) <span style="color: #ff0000;">e.</span> <span style="color: #ff0000;">]</span>)<span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">&gt;</span>
</pre>
</div>

<p>
Reading from right to left, <code>filterr</code> works as follows,
</p>

<ul class="org-ul">
<li><code>[: +./"1 (({:"1 pairs) e. ])&amp;&gt;</code>: Flag all entries in boxed input <code>y</code> with any closed brackets (<code>{:"1 pairs</code>). These are <i>corrupt</i> entries.</li>
<li><code>] #~ [ \=</code>: Invert entries if <code>x = 0</code> (incomplete). Use resulting Boolean list to filter from <code>y</code>.</li>
</ul>
</div>
</div>

<div id="outline-container-orgb8b6074" class="outline-4">
<h4 id="orgb8b6074">Read data</h4>
<div class="outline-text-4" id="text-orgb8b6074">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">getin</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[:</span> ((<span style="color: #ff0000;">&lt;</span><span style="color: #0000ff;">"</span>1 pairs) rmchars <span style="color: #ff0000;">]</span>)<span style="color: #0000ff;">&amp;.</span><span style="color: #ff0000;">&gt;</span> <span style="color: #ff0000;">&lt;</span> readin
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgfd5e1c8" class="outline-3">
<h3 id="orgfd5e1c8">Part 1</h3>
<div class="outline-text-3" id="text-orgfd5e1c8">
</div>
<div id="outline-container-org0965680" class="outline-4">
<h4 id="org0965680">Function definitions</h4>
<div class="outline-text-4" id="text-org0965680">
</div>
<div id="outline-container-org8ed5ae7" class="outline-5">
<h5 id="org8ed5ae7">Scores</h5>
<div class="outline-text-5" id="text-org8ed5ae7">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Corrupt entry scores</span>
<span style="color: #BA36A5;">corrscrs</span><span style="color: #000000;">=:</span>(<span style="color: #008000;">')'</span><span style="color: #ff0000;">;</span><span style="color: #008000;">'3'</span><span style="color: #ff0000;">;</span><span style="color: #008000;">']'</span><span style="color: #ff0000;">;</span><span style="color: #008000;">'57'</span><span style="color: #ff0000;">;</span><span style="color: #008000;">'}'</span><span style="color: #ff0000;">;</span><span style="color: #008000;">'1197'</span><span style="color: #ff0000;">;</span><span style="color: #008000;">'&gt;'</span><span style="color: #ff0000;">;</span><span style="color: #008000;">'25137'</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-orge5ecdbe" class="outline-5">
<h5 id="orge5ecdbe">First illegal character</h5>
<div class="outline-text-5" id="text-orge5ecdbe">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Get first illegal (closing) character in entry</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = boxed character list (superset or subset of pairs)</span>
<span style="color: #BA36A5;">illchar</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">{.</span> (<span style="color: #ff0000;">&lt;</span><span style="color: #0000ff;">"</span>0 <span style="color: #ff0000;">{.</span><span style="color: #0000ff;">"</span>1 pairs) rmchars <span style="color: #ff0000;">]</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org11c490c" class="outline-5">
<h5 id="org11c490c">Corrupt scores</h5>
<div class="outline-text-5" id="text-org11c490c">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Array with error scores for corrupt entries</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = boxed character list (superset or subset of pairs)</span>
<span style="color: #BA36A5;">corrupt</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">".</span><span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">]</span> rplc<span style="color: #0000ff;">&amp;</span>corrscrs)<span style="color: #0000ff;">@</span>illchar
</pre>
</div>
</div>
</div>

<div id="outline-container-org89fecd8" class="outline-5">
<h5 id="org89fecd8">Total syntax error score</h5>
<div class="outline-text-5" id="text-org89fecd8">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part1</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">+</span><span style="color: #00ff00;">/</span> <span style="color: #ff0000;">[:</span> corrupt<span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">&gt;</span> (1<span style="color: #ff0000;">:</span> filterr <span style="color: #ff0000;">]</span>)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7575ac8" class="outline-4">
<h4 id="org7575ac8">Test</h4>
<div class="outline-text-4" id="text-org7575ac8">
<div class="org-src-container">
<pre class="src src-j">assert 26397 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-10-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgffa526c" class="outline-4">
<h4 id="orgffa526c">Solution</h4>
<div class="outline-text-4" id="text-orgffa526c">
<div class="org-src-container">
<pre class="src src-j">assert 370407 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-10.txt'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org175a130" class="outline-3">
<h3 id="org175a130">Part 2</h3>
<div class="outline-text-3" id="text-org175a130">
</div>
<div id="outline-container-org454fdfc" class="outline-4">
<h4 id="org454fdfc">Function definition</h4>
<div class="outline-text-4" id="text-org454fdfc">
</div>
<div id="outline-container-orga7e5863" class="outline-5">
<h5 id="orga7e5863">Scores</h5>
<div class="outline-text-5" id="text-orga7e5863">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Incomplete entry scores</span>
<span style="color: #BA36A5;">incmpscrs</span><span style="color: #000000;">=:</span>(<span style="color: #008000;">'('</span><span style="color: #ff0000;">;</span><span style="color: #008000;">'1'</span><span style="color: #ff0000;">;</span><span style="color: #008000;">'['</span><span style="color: #ff0000;">;</span><span style="color: #008000;">'2'</span><span style="color: #ff0000;">;</span><span style="color: #008000;">'{'</span><span style="color: #ff0000;">;</span><span style="color: #008000;">'3'</span><span style="color: #ff0000;">;</span><span style="color: #008000;">'&lt;'</span><span style="color: #ff0000;">;</span><span style="color: #008000;">'4'</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-orge2e42ef" class="outline-5">
<h5 id="orge2e42ef">Incomplete scores</h5>
<div class="outline-text-5" id="text-orge2e42ef">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Array with scores for incomplete entries</span>
<span style="color: #BA36A5;">incomplete</span><span style="color: #000000;">=:</span> (<span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">{.</span> (<span style="color: #ff0000;">+</span> 5<span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">*</span>)<span style="color: #00ff00;">/\.</span>)<span style="color: #0000ff;">@:</span>(<span style="color: #ff0000;">".</span><span style="color: #0000ff;">"</span>0)<span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">]</span> rplc<span style="color: #0000ff;">&amp;</span>incmpscrs)
</pre>
</div>
</div>
</div>

<div id="outline-container-org49c2b69" class="outline-5">
<h5 id="org49c2b69">Middle score</h5>
<div class="outline-text-5" id="text-org49c2b69">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part2</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[:</span> (<span style="color: #ff0000;">&lt;.</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">-:</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">#</span> <span style="color: #ff0000;">{</span> <span style="color: #ff0000;">/:</span><span style="color: #00ff00;">~</span>) <span style="color: #ff0000;">[:</span> incomplete<span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">&gt;</span> (0<span style="color: #ff0000;">:</span> filterr <span style="color: #ff0000;">]</span>)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org79485c5" class="outline-4">
<h4 id="org79485c5">Test</h4>
<div class="outline-text-4" id="text-org79485c5">
<div class="org-src-container">
<pre class="src src-j">assert 288957 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-10-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7f05678" class="outline-4">
<h4 id="org7f05678">Solution</h4>
<div class="outline-text-4" id="text-org7f05678">
<div class="org-src-container">
<pre class="src src-j">assert 3249889609 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-10.txt'</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orge342bbe" class="outline-2">
<h2 id="orge342bbe"><a href="https://adventofcode.com/2021/day/11">Day 11: Dumbo Octopus</a></h2>
<div class="outline-text-2" id="text-orge342bbe">
<div id="text-table-of-contents">
<ul>
<li><a href="#org18292ee">Setup</a></li>
<li><a href="#orgb5ef288">Read data</a></li>
<li><a href="#org59199d5">General function definition</a></li>
<li><a href="#org6dd0a58">Part 1</a>
<ul>
<li><a href="#orgf263f86">Function definition</a></li>
<li><a href="#org4f09339">Test</a></li>
<li><a href="#org374dbfa">Solution</a></li>
</ul>
</li>
<li><a href="#orgc8778f0">Part 2</a>
<ul>
<li><a href="#org91144ac">Function definitions</a></li>
<li><a href="#orgd251fea">Test</a></li>
<li><a href="#orga4bbf22">Solution</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org18292ee" class="outline-3">
<h3 id="org18292ee">Setup</h3>
<div class="outline-text-3" id="text-org18292ee">
<div class="org-src-container">
<pre class="src src-j">cocurrent <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'day11'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-j">load <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'utils.ijs'</span>  <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">readin</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb5ef288" class="outline-3">
<h3 id="orgb5ef288">Read data</h3>
<div class="outline-text-3" id="text-orgb5ef288">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">getin</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">".</span><span style="color: #0000ff;">"</span>0 readin
</pre>
</div>
</div>
</div>

<div id="outline-container-org59199d5" class="outline-3">
<h3 id="org59199d5">General function definition</h3>
<div class="outline-text-3" id="text-org59199d5">
</div>
<div id="outline-container-org00b0b69" class="outline-5">
<h5 id="org00b0b69">Pad</h5>
<div class="outline-text-5" id="text-org00b0b69">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Surround matrix y with constant x</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = input matrix</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">x = padding constant</span>
<span style="color: #BA36A5;">pad</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[,.</span><span style="color: #00ff00;">~</span> <span style="color: #ff0000;">[,</span><span style="color: #00ff00;">~</span> <span style="color: #ff0000;">[,.</span> <span style="color: #ff0000;">,</span>
</pre>
</div>


<pre class="example">
┌─────────────┬─────────────────┐
│i. 2 2       │0 1              │
│             │2 3              │
├─────────────┼─────────────────┤
│0 pad i.2 2  │0 0 0 0          │
│             │0 0 1 0          │
│             │0 2 3 0          │
│             │0 0 0 0          │
├─────────────┼─────────────────┤
│i. 3 4       │0 1  2  3        │
│             │4 5  6  7        │
│             │8 9 10 11        │
├─────────────┼─────────────────┤
│_4 pad i. 3 4│_4 _4 _4 _4 _4 _4│
│             │_4  0  1  2  3 _4│
│             │_4  4  5  6  7 _4│
│             │_4  8  9 10 11 _4│
│             │_4 _4 _4 _4 _4 _4│
└─────────────┴─────────────────┘
</pre>
</div>
</div>

<div id="outline-container-orgbed4872" class="outline-5">
<h5 id="orgbed4872">Flash</h5>
<div class="outline-text-5" id="text-orgbed4872">
<p>
Per conditions of the problem,
</p>

<ul class="org-ul">
<li>Any octopus with an energy level greater than 9 flashes. This increases the energy level of all adjacent octopuses by 1, including octopuses that are diagonally adjacent. If this causes an octopus to have an energy level greater than 9, it also flashes. This process continues as long as new octopuses keep having their energy level increased beyond 9. (An octopus can only flash at most once per step.)</li>
<li>Finally, any octopus that flashed during this step has its energy level set to 0, as it used all of its energy to flash.</li>
</ul>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">flash</span><span style="color: #000000;">=:</span> ((9<span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">&gt;:</span>) <span style="color: #ff0000;">*.</span> (0<span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">&lt;</span>)) <span style="color: #ff0000;">*</span> ((1 1 <span style="color: #ff0000;">,:</span> 3 3) (<span style="color: #ff0000;">+</span><span style="color: #00ff00;">/</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">,</span>)<span style="color: #0000ff;">;.</span>_3 (0<span style="color: #0000ff;">&amp;</span>pad)<span style="color: #0000ff;">@</span>(9<span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">&lt;</span>)) <span style="color: #ff0000;">+</span> <span style="color: #ff0000;">]</span>
</pre>
</div>

<p>
Reading from right to left, <code>flash</code> works as follows,
</p>

<ul class="org-ul">
<li><code>+ ]</code>: Add the left expression to the input matrix</li>
<li><code>((9&amp;&gt;:) *. (0&amp;&lt;)) * ((1 1 ,: 3 3) (+/@,);._3 (0&amp;pad)@(9&amp;&lt;)</code>:
<ul class="org-ul">
<li><code>(0&amp;pad)@(9&amp;&lt;)</code>: Flag all energy levels less than 9 and pad resulting Boolean matrix with zeros.</li>
<li><code>((1 1 ,: 3 3) (+/@,);._3 (0&amp;pad)@(9&amp;&lt;)</code>: For a <code>3 x 3</code> tile size, with horizontal and vertical displacement of <code>1 x 1</code>, sum all elements in each tile.</li>
<li><code>((9&amp;&gt;:) *. (0&amp;&lt;))</code>: Set all energy levels that flashed to 0.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org44fec1c" class="outline-5">
<h5 id="org44fec1c">Step</h5>
<div class="outline-text-5" id="text-org44fec1c">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Increase the energy level and flash until no energy levels are greater than 9</span>
<span style="color: #BA36A5;">step</span><span style="color: #000000;">=:</span> flash<span style="color: #0000ff;">^:</span>_ <span style="color: #0000ff;">@:</span> <span style="color: #ff0000;">&gt;:</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6dd0a58" class="outline-3">
<h3 id="org6dd0a58">Part 1</h3>
<div class="outline-text-3" id="text-org6dd0a58">
</div>
<div id="outline-container-orgf263f86" class="outline-4">
<h4 id="orgf263f86">Function definition</h4>
<div class="outline-text-4" id="text-orgf263f86">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = input</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">x = number of steps</span>
<span style="color: #BA36A5;">part1</span><span style="color: #000000;">=:</span> 4 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'(+/)@(0&amp;=)@, step^:(i.x) y'</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-org4f09339" class="outline-4">
<h4 id="org4f09339">Test</h4>
<div class="outline-text-4" id="text-org4f09339">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">inx</span><span style="color: #000000;">=:</span> getin <span style="color: #008000;">'inputs/day-11-example.txt'</span>
assert 204 <span style="color: #ff0000;">=</span> 11 part1 inx
assert 1656 <span style="color: #ff0000;">=</span> 101 part1 inx
</pre>
</div>
</div>
</div>

<div id="outline-container-org374dbfa" class="outline-4">
<h4 id="org374dbfa">Solution</h4>
<div class="outline-text-4" id="text-org374dbfa">
<div class="org-src-container">
<pre class="src src-j">assert 1594 <span style="color: #ff0000;">=</span> 101 part1 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-11.txt'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc8778f0" class="outline-3">
<h3 id="orgc8778f0">Part 2</h3>
<div class="outline-text-3" id="text-orgc8778f0">
</div>
<div id="outline-container-org91144ac" class="outline-4">
<h4 id="org91144ac">Function definitions</h4>
<div class="outline-text-4" id="text-org91144ac">
</div>
<div id="outline-container-orgb88b4d8" class="outline-5">
<h5 id="orgb88b4d8">❖ All equal</h5>
<div class="outline-text-5" id="text-orgb88b4d8">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Returns 1 if all elements are equal</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = input (infinite rank)</span>
<span style="color: #BA36A5;">alleq</span><span style="color: #000000;">=:</span> 1<span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">=</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">#</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">~.</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">,</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7201453" class="outline-5">
<h5 id="org7201453">Synchronization step</h5>
<div class="outline-text-5" id="text-org7201453">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part2</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">&lt;:</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">#</span> <span style="color: #ff0000;">[:</span> step<span style="color: #0000ff;">^:</span>(<span style="color: #ff0000;">-.</span><span style="color: #0000ff;">@</span>alleq)<span style="color: #0000ff;">^:</span>(<span style="color: #ff0000;">&lt;</span>_) <span style="color: #ff0000;">]</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd251fea" class="outline-4">
<h4 id="orgd251fea">Test</h4>
<div class="outline-text-4" id="text-orgd251fea">
<div class="org-src-container">
<pre class="src src-j">assert 195 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-11-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga4bbf22" class="outline-4">
<h4 id="orga4bbf22">Solution</h4>
<div class="outline-text-4" id="text-orga4bbf22">
<div class="org-src-container">
<pre class="src src-j">assert 437 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-11.txt'</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orgad1843f" class="outline-2">
<h2 id="orgad1843f"><a href="https://adventofcode.com/2021/day/12">Day 12: Passage Pathing</a></h2>
<div class="outline-text-2" id="text-orgad1843f">
<div id="text-table-of-contents">
<ul>
<li><a href="#orgb8b8f3d">Setup</a></li>
<li><a href="#org4984734">Read data</a></li>
<li><a href="#org851777d">General function definitions</a></li>
<li><a href="#orgb6b07cb">Part 1</a>
<ul>
<li><a href="#orgffe2f8e">Function definition</a></li>
<li><a href="#org1f1c4f0">Test</a></li>
<li><a href="#orge434fb5">Solution</a></li>
</ul>
</li>
<li><a href="#orgddd70c2">Part 2</a>
<ul>
<li><a href="#orgdbb8134">Function definition</a></li>
<li><a href="#orgcb3d976">Test</a></li>
<li><a href="#org1daf8a6">Solution</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgb8b8f3d" class="outline-3">
<h3 id="orgb8b8f3d">Setup</h3>
<div class="outline-text-3" id="text-orgb8b8f3d">
<div class="org-src-container">
<pre class="src src-j">cocurrent <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'day12'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-j">load <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'utils.ijs'</span>  <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">readin</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4984734" class="outline-3">
<h3 id="org4984734">Read data</h3>
<div class="outline-text-3" id="text-org4984734">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">getin</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[:</span> (<span style="color: #ff0000;">]</span> <span style="color: #ff0000;">,</span> <span style="color: #ff0000;">|.</span><span style="color: #0000ff;">"</span>1) <span style="color: #ff0000;">[:</span> (<span style="color: #ff0000;">{.</span> <span style="color: #ff0000;">,</span> <span style="color: #ff0000;">{:</span>)<span style="color: #0000ff;">"</span>1 <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">;:</span> readin <span style="color: #ff0000;">]</span>
</pre>
</div>

<p>
Reading from right to left, <code>getin</code> works as follows,
</p>

<ul class="org-ul">
<li><code>;: readin ]</code>: Read file and partition strings into boxed words</li>
<li><code>({. , {:)"1</code>: Extract the first and third columns (vertices)</li>
<li><code>(] , |."1)</code>: Append the reversed list to itself ⇒ all connections in the undirected graph</li>
</ul>
</div>
</div>

<div id="outline-container-org851777d" class="outline-3">
<h3 id="org851777d">General function definitions</h3>
<div class="outline-text-3" id="text-org851777d">
</div>
<div id="outline-container-orgae48607" class="outline-5">
<h5 id="orgae48607">Connections to vertex</h5>
<div class="outline-text-5" id="text-orgae48607">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Connections to a given vertex x in graph y</span>
<span style="color: #BA36A5;">connects</span><span style="color: #000000;">=:</span> (<span style="color: #ff0000;">{:</span><span style="color: #0000ff;">"</span>1)<span style="color: #0000ff;">@</span><span style="color: #ff0000;">]</span> <span style="color: #ff0000;">#</span><span style="color: #00ff00;">~</span> <span style="color: #ff0000;">]</span> (<span style="color: #ff0000;">E.</span> <span style="color: #ff0000;">{.</span><span style="color: #0000ff;">"</span>1)<span style="color: #00ff00;">~</span> <span style="color: #ff0000;">[</span>
</pre>
</div>

<pre class="example">
┌─────────────┬─────────────────┬─────────────────┐
│y            │(&lt;'A') connects y│(&lt;'b') connects y│
├─────────────┼─────────────────┼─────────────────┤
│┌─────┬─────┐│┌─┬───┬─────┐    │┌───┬─────┬─┐    │
││start│A    │││b│end│start│    ││end│start│A│    │
│├─────┼─────┤│└─┴───┴─────┘    │└───┴─────┴─┘    │
││A    │b    ││                 │                 │
│├─────┼─────┤│                 │                 │
││A    │end  ││                 │                 │
│├─────┼─────┤│                 │                 │
││b    │end  ││                 │                 │
│├─────┼─────┤│                 │                 │
││A    │start││                 │                 │
│├─────┼─────┤│                 │                 │
││b    │start││                 │                 │
│├─────┼─────┤│                 │                 │
││end  │A    ││                 │                 │
│├─────┼─────┤│                 │                 │
││end  │b    ││                 │                 │
│├─────┼─────┤│                 │                 │
││b    │A    ││                 │                 │
│└─────┴─────┘│                 │                 │
└─────────────┴─────────────────┴─────────────────┘
</pre>
</div>
</div>

<div id="outline-container-orga936e3f" class="outline-5">
<h5 id="orga936e3f">Lower case characters</h5>
<div class="outline-text-5" id="text-orga936e3f">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Flag all lower case characters in y</span>
<span style="color: #BA36A5;">issmall</span><span style="color: #000000;">=:</span> (a<span style="color: #00ff00;">.</span> <span style="color: #ff0000;">{</span><span style="color: #00ff00;">~</span> 97 <span style="color: #ff0000;">+</span> <span style="color: #ff0000;">i.</span>26) <span style="color: #ff0000;">e.</span><span style="color: #00ff00;">~</span> <span style="color: #ff0000;">]</span>
</pre>
</div>

<pre class="example">
┌─┬─┬───┬─┬─┬─┬─────────┬───┬───┐
│1│0│1 1│0│1│0│1 1 1 1 1│1 1│0 0│
└─┴─┴───┴─┴─┴─┴─────────┴───┴───┘

</pre>
</div>
</div>

<div id="outline-container-org0bb9f12" class="outline-5">
<h5 id="org0bb9f12">Filter small caves</h5>
<div class="outline-text-5" id="text-org0bb9f12">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Filter small caves from graph y</span>
<span style="color: #BA36A5;">filtsm</span><span style="color: #000000;">=:</span> (<span style="color: #ff0000;">]</span> <span style="color: #ff0000;">#</span><span style="color: #00ff00;">~</span> ((<span style="color: #ff0000;">+.</span><span style="color: #00ff00;">/</span>)<span style="color: #0000ff;">@:</span>issmall)<span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">&gt;</span>)<span style="color: #0000ff;">@:</span><span style="color: #ff0000;">~.</span><span style="color: #0000ff;">@:</span>((<span style="color: #008000;">'start'</span><span style="color: #ff0000;">;</span><span style="color: #008000;">'end'</span>) <span style="color: #ff0000;">-.</span><span style="color: #00ff00;">~</span> <span style="color: #ff0000;">]</span>)<span style="color: #0000ff;">@:</span><span style="color: #ff0000;">,</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org74ba419" class="outline-5">
<h5 id="org74ba419">Count paths</h5>
<div class="outline-text-5" id="text-org74ba419">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Count paths from x to y in a graph satisfying condition u</span>
<span style="color: #BA36A5;">dfs</span><span style="color: #000000;">=:</span> 1 <span style="color: #ff0000;">:</span> 0
(a<span style="color: #ff0000;">:</span> u dfs y)
<span style="color: #ff0000;">:</span>
<span style="color: #BA36A5;">cave</span><span style="color: #000000;">=.</span> y
<span style="color: #BA36A5;">seen</span><span style="color: #000000;">=.</span> x
<span style="color: #0000FF;">if.</span> cave <span style="color: #ff0000;">=</span> (<span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'end'</span>) <span style="color: #0000FF;">do.</span> 1 <span style="color: #0000FF;">return.</span> <span style="color: #0000FF;">end.</span>
<span style="color: #0000FF;">if.</span> (cave <span style="color: #ff0000;">e.</span> seen) <span style="color: #0000FF;">do.</span>
  <span style="color: #0000FF;">if.</span> (cave <span style="color: #ff0000;">=</span> (<span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'start'</span>)) <span style="color: #0000FF;">do.</span> 0 <span style="color: #0000FF;">return.</span> <span style="color: #0000FF;">end.</span>
  <span style="color: #0000FF;">if.</span> (cave u (seen (<span style="color: #ff0000;">e.</span> <span style="color: #ff0000;">#</span> <span style="color: #ff0000;">[</span>) smcaves)) <span style="color: #0000FF;">do.</span> 0 <span style="color: #0000FF;">return.</span> <span style="color: #0000FF;">end.</span>
<span style="color: #0000FF;">end.</span>
<span style="color: #ff0000;">+</span><span style="color: #00ff00;">/</span> ((seen <span style="color: #ff0000;">,</span> cave) u dfs <span style="color: #ff0000;">]</span>)<span style="color: #0000ff;">"</span>1 0 (y connects graph)
)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb6b07cb" class="outline-3">
<h3 id="orgb6b07cb">Part 1</h3>
<div class="outline-text-3" id="text-orgb6b07cb">
</div>
<div id="outline-container-orgffe2f8e" class="outline-4">
<h4 id="orgffe2f8e">Function definition</h4>
<div class="outline-text-4" id="text-orgffe2f8e">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part1</span><span style="color: #000000;">=:</span> 3 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'e. dfs (&lt;''start'') [ smcaves=: filtsm graph=: y'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1f1c4f0" class="outline-4">
<h4 id="org1f1c4f0">Test</h4>
<div class="outline-text-4" id="text-org1f1c4f0">
<div class="org-src-container">
<pre class="src src-j">assert 10  <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-12-example-1.txt'</span>
assert 19  <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-12-example-2.txt'</span>
assert 226 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-12-example-3.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge434fb5" class="outline-4">
<h4 id="orge434fb5">Solution</h4>
<div class="outline-text-4" id="text-orge434fb5">
<div class="org-src-container">
<pre class="src src-j">assert 4304 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-12.txt'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgddd70c2" class="outline-3">
<h3 id="orgddd70c2">Part 2</h3>
<div class="outline-text-3" id="text-orgddd70c2">
</div>
<div id="outline-container-orgdbb8134" class="outline-4">
<h4 id="orgdbb8134">Function definition</h4>
<div class="outline-text-4" id="text-orgdbb8134">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part2</span><span style="color: #000000;">=:</span> 3 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'((&lt;:@:# &gt; +/)@:~:@:,) dfs (&lt;''start'') [ smcaves=: filtsm graph=: y'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcb3d976" class="outline-4">
<h4 id="orgcb3d976">Test</h4>
<div class="outline-text-4" id="text-orgcb3d976">
<div class="org-src-container">
<pre class="src src-j">assert 36   <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-12-example-1.txt'</span>
assert 103  <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-12-example-2.txt'</span>
assert 3509 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-12-example-3.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1daf8a6" class="outline-4">
<h4 id="org1daf8a6">Solution</h4>
<div class="outline-text-4" id="text-org1daf8a6">
<div class="org-src-container">
<pre class="src src-j">assert 118242 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-12.txt'</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc6f10dc" class="outline-2">
<h2 id="orgc6f10dc"><a href="https://adventofcode.com/2021/day/13">Day 13: Transparent Origami</a></h2>
<div class="outline-text-2" id="text-orgc6f10dc">
<div id="text-table-of-contents">
<ul>
<li><a href="#org2a14249">Setup</a></li>
<li><a href="#org3a7b574">Approach 1</a>
<ul>
<li><a href="#orgd520bdc">Read and process data</a></li>
<li><a href="#orge303459">General function definition</a></li>
<li><a href="#org0475415">Part 1</a></li>
<li><a href="#orgc871630">Part 2</a></li>
</ul>
</li>
<li><a href="#org8a2a927">Approach 2</a>
<ul>
<li><a href="#org9a3963f">Read and process data</a></li>
<li><a href="#org0c7b89a">General function definitions</a></li>
<li><a href="#orgfa0825c">Part 1</a></li>
<li><a href="#org08818c0">Part 2</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org2a14249" class="outline-3">
<h3 id="org2a14249">Setup</h3>
<div class="outline-text-3" id="text-org2a14249">
<div class="org-src-container">
<pre class="src src-j">cocurrent <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'day13'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-j">load <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'utils.ijs'</span>  <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">readin</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3a7b574" class="outline-3">
<h3 id="org3a7b574">Approach 1</h3>
<div class="outline-text-3" id="text-org3a7b574">
<p>
This approach closely follows <a href="https://www.youtube.com/watch?v=w15Z1xObd4U">Russ&rsquo; Ivy-based solution</a>.
</p>
</div>

<div id="outline-container-orgd520bdc" class="outline-4">
<h4 id="orgd520bdc">Read and process data</h4>
<div class="outline-text-4" id="text-orgd520bdc">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">rplcxy</span><span style="color: #000000;">=:</span> rplc<span style="color: #0000ff;">&amp;</span>(<span style="color: #008000;">'y='</span><span style="color: #ff0000;">;</span><span style="color: #008000;">'0 '</span><span style="color: #ff0000;">;</span><span style="color: #008000;">'x='</span><span style="color: #ff0000;">;</span><span style="color: #008000;">''</span><span style="color: #ff0000;">;</span><span style="color: #008000;">','</span><span style="color: #ff0000;">;</span><span style="color: #008000;">' '</span>)
<span style="color: #BA36A5;">rawin</span><span style="color: #000000;">=:</span> 3 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'&gt;&amp;.&gt; &lt;;._1 (a: , ]) ({. ,&amp;.&gt; {:)"1 (".&amp;.&gt;) ;: rplcxy readin y'</span>
</pre>
</div>

<p>
<code>rawin</code> creates a 2-element boxed list,
</p>

<ol class="org-ol">
<li>The first element is the list of dots converted, after removing the <code>,</code> (comma) between the numbers, to a two-column integer array.</li>
<li>The second element is a two-column integer array of fold instructions as <code>(x, 0)</code> or <code>(0, y)</code> that is obtained after replacing <code>y=</code> with <code>0</code> and removing <code>x=</code>.</li>
</ol>

<p>
Since the fold instructions have to be applied recursively to the list of dots, it is convenient to recast the data into a structure conducive for the application of <code>/\.</code>.
The <code>procin</code> (<i>process input</i>) function below does exactly this.
</p>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">procin</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">&lt;</span><span style="color: #0000ff;">"</span>1<span style="color: #0000ff;">@</span><span style="color: #ff0000;">|.</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">&gt;</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">{:,</span> <span style="color: #ff0000;">{.</span>
</pre>
</div>

<p>
<code>getin</code> is thusly defined,
</p>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">getin</span><span style="color: #000000;">=:</span> procin<span style="color: #0000ff;">@</span>rawin
</pre>
</div>

<pre class="example">
┌──────────────┬───────────┬───────────────┐
│] readin y    │rawin y    │getin y        │
├──────────────┼───────────┼───────────────┤
│6,10          │┌─────┬───┐│┌───┬───┬─────┐│
│0,14          ││ 6 10│0 7│││5 0│0 7│ 6 10││
│9,10          ││ 0 14│5 0│││   │   │ 0 14││
│0,3           ││ 9 10│   │││   │   │ 9 10││
│10,4          ││ 0  3│   │││   │   │ 0  3││
│4,11          ││10  4│   │││   │   │10  4││
│6,0           ││ 4 11│   │││   │   │ 4 11││
│6,12          ││ 6  0│   │││   │   │ 6  0││
│4,1           ││ 6 12│   │││   │   │ 6 12││
│0,13          ││ 4  1│   │││   │   │ 4  1││
│10,12         ││ 0 13│   │││   │   │ 0 13││
│3,4           ││10 12│   │││   │   │10 12││
│3,0           ││ 3  4│   │││   │   │ 3  4││
│8,4           ││ 3  0│   │││   │   │ 3  0││
│1,10          ││ 8  4│   │││   │   │ 8  4││
│2,14          ││ 1 10│   │││   │   │ 1 10││
│8,10          ││ 2 14│   │││   │   │ 2 14││
│9,0           ││ 8 10│   │││   │   │ 8 10││
│              ││ 9  0│   │││   │   │ 9  0││
│fold along y=7│└─────┴───┘│└───┴───┴─────┘│
│fold along x=5│           │               │
└──────────────┴───────────┴───────────────┘
</pre>
</div>
</div>

<div id="outline-container-orge303459" class="outline-4">
<h4 id="orge303459">General function definition</h4>
<div class="outline-text-4" id="text-orge303459">
</div>
<div id="outline-container-org9c3723f" class="outline-5">
<h5 id="org9c3723f">Fold</h5>
<div class="outline-text-5" id="text-org9c3723f">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Fold point x across y</span>
<span style="color: #BA36A5;">fold</span><span style="color: #000000;">=:</span> (<span style="color: #ff0000;">]</span> <span style="color: #ff0000;">-</span> <span style="color: #ff0000;">|</span><span style="color: #0000ff;">@:</span><span style="color: #ff0000;">-</span><span style="color: #00ff00;">~</span>)<span style="color: #0000ff;">`</span><span style="color: #ff0000;">[</span><span style="color: #0000ff;">@.</span>(0<span style="color: #ff0000;">:</span> <span style="color: #ff0000;">=</span> <span style="color: #ff0000;">]</span>)
</pre>
</div>

<pre class="example">
┌────────┬────────┬────────┬────────┐
│5 fold 3│8 fold 6│3 fold 0│0 fold 4│
├────────┼────────┼────────┼────────┤
│1       │4       │3       │0       │
└────────┴────────┴────────┴────────┘

</pre>
</div>
</div>

<div id="outline-container-orgc4ac10d" class="outline-5">
<h5 id="orgc4ac10d">Origami</h5>
<div class="outline-text-5" id="text-orgc4ac10d">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Recursively apply folds x to series of points y</span>
<span style="color: #BA36A5;">origami</span><span style="color: #000000;">=:</span> ((fold<span style="color: #0000ff;">"</span>0)<span style="color: #00ff00;">~</span><span style="color: #0000ff;">"</span>1<span style="color: #00ff00;">/</span>)<span style="color: #0000ff;">&amp;.</span><span style="color: #ff0000;">&gt;</span><span style="color: #00ff00;">/\.</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8ff40f8" class="outline-5">
<h5 id="org8ff40f8">Marks</h5>
<div class="outline-text-5" id="text-org8ff40f8">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Creates grid of 0s with 1s (marks) at locations of points in y</span>
<span style="color: #BA36A5;">marks</span><span style="color: #000000;">=:</span> 3 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'1 (|.&amp;.&gt; &lt;"1 y) } (0 * i. |. &gt;: &gt;./ y)'</span>
</pre>
</div>

<pre class="example">
┌───┬───────┬───┬───────┬───┬───────┬───┬───────┬───┬───────┐
│y  │marks y│y  │marks y│y  │marks y│y  │marks y│y  │marks y│
├───┼───────┼───┼───────┼───┼───────┼───┼───────┼───┼───────┤
│1 0│0 1    │1 0│0 1 0 0│1 0│0 1 0 0│1 0│0 1 0 0│1 0│0 1 0 0│
│   │       │3 1│0 0 0 1│3 1│0 0 0 1│3 1│0 0 0 1│3 1│0 0 0 1│
│   │       │   │       │2 2│0 0 1 0│2 2│0 0 1 0│2 2│0 0 1 0│
│   │       │   │       │   │       │1 3│0 1 0 0│1 3│0 1 0 0│
│   │       │   │       │   │       │   │       │2 4│0 0 1 0│
└───┴───────┴───┴───────┴───┴───────┴───┴───────┴───┴───────┘

</pre>
</div>
</div>
</div>

<div id="outline-container-org0475415" class="outline-4">
<h4 id="org0475415">Part 1</h4>
<div class="outline-text-4" id="text-org0475415">
</div>
<div id="outline-container-org7f41101" class="outline-5">
<h5 id="org7f41101">Function definition</h5>
<div class="outline-text-5" id="text-org7f41101">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part1</span><span style="color: #000000;">=:</span> 3 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'+/ ~: &gt; _2&amp;{ origami y'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org340fdc6" class="outline-5">
<h5 id="org340fdc6">Test</h5>
<div class="outline-text-5" id="text-org340fdc6">
<div class="org-src-container">
<pre class="src src-j">assert 17 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-13-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf5a7616" class="outline-5">
<h5 id="orgf5a7616">Solution</h5>
<div class="outline-text-5" id="text-orgf5a7616">
<div class="org-src-container">
<pre class="src src-j">assert 827 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-13.txt'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc871630" class="outline-4">
<h4 id="orgc871630">Part 2</h4>
<div class="outline-text-4" id="text-orgc871630">
</div>
<div id="outline-container-orgbf41ea3" class="outline-5">
<h5 id="orgbf41ea3">Function definition</h5>
<div class="outline-text-5" id="text-orgbf41ea3">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part2</span><span style="color: #000000;">=:</span> 3 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'_ * -. &gt;  marks ~. &gt; @ {. origami y'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1864442" class="outline-5">
<h5 id="org1864442">Solution</h5>
<div class="outline-text-5" id="text-org1864442">
<div class="org-src-container">
<pre class="src src-j">part2 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-13.txt'</span> <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">EAHKRECP</span>
</pre>
</div>

<pre class="example">
0 0 0 0 _ _ 0 0 _ _ 0 _ _ 0 _ 0 _ _ 0 _ 0 0 0 _ _ 0 0 0 0 _ _ 0 0 _ _ 0 0 0 _
0 _ _ _ _ 0 _ _ 0 _ 0 _ _ 0 _ 0 _ 0 _ _ 0 _ _ 0 _ 0 _ _ _ _ 0 _ _ 0 _ 0 _ _ 0
0 0 0 _ _ 0 _ _ 0 _ 0 0 0 0 _ 0 0 _ _ _ 0 _ _ 0 _ 0 0 0 _ _ 0 _ _ _ _ 0 _ _ 0
0 _ _ _ _ 0 0 0 0 _ 0 _ _ 0 _ 0 _ 0 _ _ 0 0 0 _ _ 0 _ _ _ _ 0 _ _ _ _ 0 0 0 _
0 _ _ _ _ 0 _ _ 0 _ 0 _ _ 0 _ 0 _ 0 _ _ 0 _ 0 _ _ 0 _ _ _ _ 0 _ _ 0 _ 0 _ _ _
0 0 0 0 _ 0 _ _ 0 _ 0 _ _ 0 _ 0 _ _ 0 _ 0 _ _ 0 _ 0 0 0 0 _ _ 0 0 _ _ 0 _ _ _

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8a2a927" class="outline-3">
<h3 id="org8a2a927">Approach 2</h3>
<div class="outline-text-3" id="text-org8a2a927">
<p>
This approach follows that laid out in the problem.
</p>
</div>

<div id="outline-container-org9a3963f" class="outline-4">
<h4 id="org9a3963f">Read and process data</h4>
<div class="outline-text-4" id="text-org9a3963f">
</div>
<div id="outline-container-org72d0133" class="outline-5">
<h5 id="org72d0133">Raw input</h5>
<div class="outline-text-5" id="text-org72d0133">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">rplcxy</span><span style="color: #000000;">=:</span> rplc<span style="color: #0000ff;">&amp;</span>(<span style="color: #008000;">'y='</span><span style="color: #ff0000;">;</span><span style="color: #008000;">'_'</span><span style="color: #ff0000;">;</span><span style="color: #008000;">'x='</span><span style="color: #ff0000;">;</span><span style="color: #008000;">''</span><span style="color: #ff0000;">;</span><span style="color: #008000;">','</span><span style="color: #ff0000;">;</span><span style="color: #008000;">' '</span>)
<span style="color: #BA36A5;">rawin</span><span style="color: #000000;">=:</span> 3 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'&gt;&amp;.&gt; &lt;;._1 (a: , ]) ({. ,&amp;.&gt; {:)"1 (".&amp;.&gt;) ;: rplcxy readin y'</span>
</pre>
</div>

<p>
<code>rawin</code> creates a 2-element boxed list,
</p>

<ol class="org-ol">
<li>The first element is the list of dots converted, after removing the <code>,</code> (comma) between the numbers, to a two-column integer array.</li>
<li>The second element is an integer array of fold instructions with the convention that negative numbers are used to denote folds along <code>y</code></li>
</ol>
<p>
(the convention of <a href="#org3a7b574">Approach 1</a> could also have been used but this is simpler).
</p>
</div>
</div>

<div id="outline-container-org97073e5" class="outline-5">
<h5 id="org97073e5">Points to grid</h5>
<div class="outline-text-5" id="text-org97073e5">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Creates grid of 0s with 1s (marks) at locations of points in y</span>
<span style="color: #BA36A5;">marks</span><span style="color: #000000;">=:</span> 3 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'1 (|.&amp;.&gt; &lt;"1 y) } (0 * i. |. &gt;: &gt;./ y)'</span>
</pre>
</div>

<p>
As in <a href="#org3a7b574">Approach 1</a>, the <code>marks</code> function expands a set of <code>(x, y)</code> points on a (boolean) grid,
</p>

<pre class="example">
┌───┬───────┬───┬───────┬───┬───────┬───┬───────┬───┬───────┐
│y  │marks y│y  │marks y│y  │marks y│y  │marks y│y  │marks y│
├───┼───────┼───┼───────┼───┼───────┼───┼───────┼───┼───────┤
│1 0│0 1    │1 0│0 1 0 0│1 0│0 1 0 0│1 0│0 1 0 0│1 0│0 1 0 0│
│   │       │3 1│0 0 0 1│3 1│0 0 0 1│3 1│0 0 0 1│3 1│0 0 0 1│
│   │       │   │       │2 2│0 0 1 0│2 2│0 0 1 0│2 2│0 0 1 0│
│   │       │   │       │   │       │1 3│0 1 0 0│1 3│0 1 0 0│
│   │       │   │       │   │       │   │       │2 4│0 0 1 0│
└───┴───────┴───┴───────┴───┴───────┴───┴───────┴───┴───────┘

</pre>
</div>
</div>

<div id="outline-container-orgc47996c" class="outline-5">
<h5 id="orgc47996c">Get input</h5>
<div class="outline-text-5" id="text-orgc47996c">
<p>
Since the folds are to be applied recursively, <code>getin</code> casts the data in a format conducive for the application of <code>/\.</code>
</p>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">getin</span><span style="color: #000000;">=:</span> 3 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'(;/@,@|.@(] + *) i) , &lt;(marks d) [ ''d i''=. rawin y'</span>
</pre>
</div>

<p>
Indexing starts at zero, so magnitudes of both the <code>x</code> (positive) and <code>y</code> (negative) fold instructions are incremented (<code>(] + *) i</code>).
</p>

<pre class="example">
┌──────────────┬────────────────────────────┐
│] readin y    │getin y                     │
├──────────────┼────────────────────────────┤
│6,10          │┌─┬──┬─────────────────────┐│
│0,14          ││6│_8│0 0 0 1 0 0 1 0 0 1 0││
│9,10          ││ │  │0 0 0 0 1 0 0 0 0 0 0││
│0,3           ││ │  │0 0 0 0 0 0 0 0 0 0 0││
│10,4          ││ │  │1 0 0 0 0 0 0 0 0 0 0││
│4,11          ││ │  │0 0 0 1 0 0 0 0 1 0 1││
│6,0           ││ │  │0 0 0 0 0 0 0 0 0 0 0││
│6,12          ││ │  │0 0 0 0 0 0 0 0 0 0 0││
│4,1           ││ │  │0 0 0 0 0 0 0 0 0 0 0││
│0,13          ││ │  │0 0 0 0 0 0 0 0 0 0 0││
│10,12         ││ │  │0 0 0 0 0 0 0 0 0 0 0││
│3,4           ││ │  │0 1 0 0 0 0 1 0 1 1 0││
│3,0           ││ │  │0 0 0 0 1 0 0 0 0 0 0││
│8,4           ││ │  │0 0 0 0 0 0 1 0 0 0 1││
│1,10          ││ │  │1 0 0 0 0 0 0 0 0 0 0││
│2,14          ││ │  │1 0 1 0 0 0 0 0 0 0 0││
│8,10          │└─┴──┴─────────────────────┘│
│9,0           │                            │
│              │                            │
│fold along y=7│                            │
│fold along x=5│                            │
└──────────────┴────────────────────────────┘
</pre>
</div>
</div>
</div>

<div id="outline-container-org0c7b89a" class="outline-4">
<h4 id="org0c7b89a">General function definitions</h4>
<div class="outline-text-4" id="text-org0c7b89a">
</div>
<div id="outline-container-org37470e6" class="outline-5">
<h5 id="org37470e6">❖ Fold</h5>
<div class="outline-text-5" id="text-org37470e6">
<p>
A generic function to fold along any axis is defined as,
</p>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Conjunction to split boolean matrix y by u and v across x and </span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">join resulting submatrices</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = input matrix</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">x = integer (fold along)</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">u, v = 'selection' verbs =&gt; {., }., {:, }:, m&amp;}</span>
<span style="color: #BA36A5;">fold</span><span style="color: #000000;">=:</span> 2 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'|.@(+./)@(u ,: v)~'</span>
</pre>
</div>

<p>
<code>fold</code> is defined to be consistent with the adapted <a href="#org0f72158">Conventions</a>.
</p>

<p>
This conjunction makes use of the auto fill property of <a href="https://code.jsoftware.com/wiki/Vocabulary/commaco#dyadic">laminate</a>,
</p>

<pre class="example">
┌─────┬────────────────┐
│y    │(}. y) ,: ({. y)│
├─────┼────────────────┤
│0 0 1│0 1 1           │
│0 1 1│1 1 0           │
│1 1 0│0 1 0           │
│0 1 0│                │
│     │0 0 1           │
│     │0 0 0           │
│     │0 0 0           │
└─────┴────────────────┘
</pre>

<p>
that is, <code>,:</code> can be used to split the rows or columns of the matrix into separate sub-matrices of the same size.
</p>
</div>
</div>

<div id="outline-container-org9402c1b" class="outline-5">
<h5 id="org9402c1b">Horizontal and vertical folds</h5>
<div class="outline-text-5" id="text-org9402c1b">
<p>
The horizontal fold is now easily defined by providing the appropriate <code>u</code> and <code>v</code>,
</p>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Fold boolean matrix y along rows x</span>
<span style="color: #BA36A5;">foldh</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">|.</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">}:</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">{.</span> fold <span style="color: #ff0000;">}.</span>
</pre>
</div>


<pre class="example">
┌─────────┬─────────┬─────────┐
│y        │y foldh 5│y foldh 6│
├─────────┼─────────┼─────────┤
│0 0 1 0 1│0 0 1 0 1│0 0 1 0 1│
│1 1 1 0 0│1 1 1 1 0│1 1 1 0 0│
│1 0 0 0 1│1 1 0 0 1│1 0 0 0 1│
│0 1 1 1 1│0 1 1 1 1│0 1 1 1 1│
│0 0 1 0 0│         │1 1 1 0 1│
│0 1 0 1 1│         │         │
│1 1 0 0 1│         │         │
│0 0 0 1 0│         │         │
└─────────┴─────────┴─────────┘
</pre>

<p>
Note that <code>foldh</code> works as expected only for <code>x &gt;: (# y)</code>.
</p>

<p>
The vertical fold is the horizontal fold on the transposed matrix,
</p>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Fold boolean matrix x along columns y</span>
<span style="color: #BA36A5;">foldv</span><span style="color: #000000;">=:</span> foldh<span style="color: #0000ff;">&amp;.</span><span style="color: #ff0000;">|:</span> 
</pre>
</div>

<p>
Lastly, by the convention adopted above, vertical folds are applied to the positive instructions and horizontal folds to the negative instructions,
</p>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Fold boolean matrix y along column or row x</span>
<span style="color: #BA36A5;">foldvh</span><span style="color: #000000;">=:</span> foldv<span style="color: #0000ff;">`</span>(<span style="color: #ff0000;">[</span> foldh <span style="color: #ff0000;">|</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">]</span>) <span style="color: #0000ff;">@.</span> (0<span style="color: #ff0000;">:</span> <span style="color: #ff0000;">&gt;</span> <span style="color: #ff0000;">]</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org69337f1" class="outline-5">
<h5 id="org69337f1">Origami</h5>
<div class="outline-text-5" id="text-org69337f1">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Recursively apply folds x to boolean matrix y</span>
<span style="color: #BA36A5;">origami</span><span style="color: #000000;">=:</span> (foldvh<span style="color: #00ff00;">~</span>)<span style="color: #0000ff;">&amp;.</span><span style="color: #ff0000;">&gt;</span><span style="color: #00ff00;">/\.</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgfa0825c" class="outline-4">
<h4 id="orgfa0825c">Part 1</h4>
<div class="outline-text-4" id="text-orgfa0825c">
</div>
<div id="outline-container-orgfa4f08d" class="outline-5">
<h5 id="orgfa4f08d">Function definition</h5>
<div class="outline-text-5" id="text-orgfa4f08d">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part1</span><span style="color: #000000;">=:</span> 3 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'+/ , &gt; (_2&amp;{) origami y'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7f440f9" class="outline-5">
<h5 id="org7f440f9">Test</h5>
<div class="outline-text-5" id="text-org7f440f9">
<div class="org-src-container">
<pre class="src src-j">assert 17 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-13-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcd21ff7" class="outline-5">
<h5 id="orgcd21ff7">Solution</h5>
<div class="outline-text-5" id="text-orgcd21ff7">
<div class="org-src-container">
<pre class="src src-j">assert 827 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-13.txt'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org08818c0" class="outline-4">
<h4 id="org08818c0">Part 2</h4>
<div class="outline-text-4" id="text-org08818c0">
</div>
<div id="outline-container-org6430756" class="outline-5">
<h5 id="org6430756">Function definition</h5>
<div class="outline-text-5" id="text-org6430756">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part2</span><span style="color: #000000;">=:</span> 3 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'_ * -. &gt; @ {. origami y'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2be668b" class="outline-5">
<h5 id="org2be668b">Solution</h5>
<div class="outline-text-5" id="text-org2be668b">
<div class="org-src-container">
<pre class="src src-j">part2 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-13.txt'</span>  <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">EAHKRECP</span>
</pre>
</div>

<pre class="example">
0 0 0 0 _ _ 0 0 _ _ 0 _ _ 0 _ 0 _ _ 0 _ 0 0 0 _ _ 0 0 0 0 _ _ 0 0 _ _ 0 0 0 _ _
0 _ _ _ _ 0 _ _ 0 _ 0 _ _ 0 _ 0 _ 0 _ _ 0 _ _ 0 _ 0 _ _ _ _ 0 _ _ 0 _ 0 _ _ 0 _
0 0 0 _ _ 0 _ _ 0 _ 0 0 0 0 _ 0 0 _ _ _ 0 _ _ 0 _ 0 0 0 _ _ 0 _ _ _ _ 0 _ _ 0 _
0 _ _ _ _ 0 0 0 0 _ 0 _ _ 0 _ 0 _ 0 _ _ 0 0 0 _ _ 0 _ _ _ _ 0 _ _ _ _ 0 0 0 _ _
0 _ _ _ _ 0 _ _ 0 _ 0 _ _ 0 _ 0 _ 0 _ _ 0 _ 0 _ _ 0 _ _ _ _ 0 _ _ 0 _ 0 _ _ _ _
0 0 0 0 _ 0 _ _ 0 _ 0 _ _ 0 _ 0 _ _ 0 _ 0 _ _ 0 _ 0 0 0 0 _ _ 0 0 _ _ 0 _ _ _ _

</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org82096b9" class="outline-2">
<h2 id="org82096b9"><a href="https://adventofcode.com/2021/day/14">Day 14: Extended Polymerization</a></h2>
<div class="outline-text-2" id="text-org82096b9">
<div id="text-table-of-contents">
<ul>
<li><a href="#orgdc1b637">Setup</a></li>
<li><a href="#org9c69462">Read data</a></li>
<li><a href="#org10881ff">General function definitions</a></li>
<li><a href="#org146db90">Part 1</a>
<ul>
<li><a href="#orgaa755af">Function definition</a></li>
<li><a href="#orgf9a074a">Test</a></li>
<li><a href="#orgcef3751">Solution</a></li>
</ul>
</li>
<li><a href="#org2a2c5c5">Part 2</a>
<ul>
<li><a href="#org76ce387">Function definition</a></li>
<li><a href="#org1a7fedb">Test</a></li>
<li><a href="#org1af04b0">Solution</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgdc1b637" class="outline-3">
<h3 id="orgdc1b637">Setup</h3>
<div class="outline-text-3" id="text-orgdc1b637">
<div class="org-src-container">
<pre class="src src-j">cocurrent <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'day14'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-j">load <span style="color: #ff0000;">&lt;</span><span style="color: #008000;">'utils.ijs'</span>  <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">readin</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9c69462" class="outline-3">
<h3 id="org9c69462">Read data</h3>
<div class="outline-text-3" id="text-org9c69462">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">getin</span><span style="color: #000000;">=:</span> ((0<span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">{::</span>)<span style="color: #0000ff;">@</span><span style="color: #ff0000;">{.</span><span style="color: #0000ff;">@</span><span style="color: #ff0000;">]</span> <span style="color: #ff0000;">;</span> <span style="color: #ff0000;">&lt;</span><span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">[:</span> _2<span style="color: #0000ff;">&amp;</span>(<span style="color: #ff0000;">&lt;</span><span style="color: #00ff00;">\</span>)<span style="color: #0000ff;">"</span>1 <span style="color: #ff0000;">[:</span> (0 1 0 6 6 1 <span style="color: #ff0000;">{</span> <span style="color: #ff0000;">]</span>)<span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">&gt;</span> 2<span style="color: #0000ff;">&amp;</span><span style="color: #ff0000;">}.</span>))<span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">&lt;</span><span style="color: #0000ff;">"</span>1 readin<span style="color: #0000ff;">@</span><span style="color: #ff0000;">]</span>)
</pre>
</div>

<p>
<code>getin</code> creates a 2-element boxed list,
</p>

<ul class="org-ul">
<li>The first element is the template string.</li>
<li>The second element is a 3-column boxed array of the <i>expanded</i> rules,
<ul class="org-ul">
<li>The first column is the <b>source-molecule-pairs</b></li>
<li>The second and third columns are the corresponding <b>reaction-product-molecule-pairs</b>,</li>
</ul></li>
</ul>

<pre class="example">
┌──────────┬─────────────────┐
│] readin y│getin y          │
├──────────┼─────────────────┤
│NNCB      │┌────┬──────────┐│
│          ││NNCB│┌──┬──┬──┐││
│CH -&gt; B   ││    ││CH│CB│BH│││
│HH -&gt; N   ││    │├──┼──┼──┤││
│CB -&gt; H   ││    ││HH│HN│NH│││
│NH -&gt; C   ││    │├──┼──┼──┤││
│HB -&gt; C   ││    ││CB│CH│HB│││
│HC -&gt; B   ││    │├──┼──┼──┤││
│HN -&gt; C   ││    ││NH│NC│CH│││
│NN -&gt; C   ││    │├──┼──┼──┤││
│BH -&gt; H   ││    ││HB│HC│CB│││
│NC -&gt; B   ││    │├──┼──┼──┤││
│NB -&gt; B   ││    ││HC│HB│BC│││
│BN -&gt; B   ││    │├──┼──┼──┤││
│BB -&gt; N   ││    ││HN│HC│CN│││
│BC -&gt; B   ││    │├──┼──┼──┤││
│CC -&gt; N   ││    ││NN│NC│CN│││
│CN -&gt; C   ││    │├──┼──┼──┤││
│          ││    ││BH│BH│HH│││
│          ││    │├──┼──┼──┤││
│          ││    ││NC│NB│BC│││
│          ││    │├──┼──┼──┤││
│          ││    ││NB│NB│BB│││
│          ││    │├──┼──┼──┤││
│          ││    ││BN│BB│BN│││
│          ││    │├──┼──┼──┤││
│          ││    ││BB│BN│NB│││
│          ││    │├──┼──┼──┤││
│          ││    ││BC│BB│BC│││
│          ││    │├──┼──┼──┤││
│          ││    ││CC│CN│NC│││
│          ││    │├──┼──┼──┤││
│          ││    ││CN│CC│CN│││
│          ││    │└──┴──┴──┘││
│          │└────┴──────────┘│
└──────────┴─────────────────┘
</pre>
</div>
</div>

<div id="outline-container-org10881ff" class="outline-3">
<h3 id="org10881ff">General function definitions</h3>
<div class="outline-text-3" id="text-org10881ff">
<p>
This problem is almost identical to <a href="https://adventofcode.com/2021/day/6">Day 06: Lanternfish</a> , except that the stochastic matrix now has to be constructed automatically.
</p>
</div>

<div id="outline-container-org6b06079" class="outline-5">
<h5 id="org6b06079">Stochastic matrix</h5>
<div class="outline-text-5" id="text-org6b06079">
<p>
The (transpose of) stochastic matrix is obtained by looking up the positions of the product-pairs in the source-pair sequence,
</p>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Create a stochastic matrix from y</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = boxed table of rules</span>
<span style="color: #8D8D84;">NB.     </span><span style="color: #8D8D84; font-style: italic;">column 1 = source molecule pairs</span>
<span style="color: #8D8D84;">NB.     </span><span style="color: #8D8D84; font-style: italic;">column 2 and 3 = product molecule pairs</span>
<span style="color: #BA36A5;">stoctrix</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">|:</span> <span style="color: #ff0000;">{.</span><span style="color: #0000ff;">"</span>1 <span style="color: #ff0000;">e.</span><span style="color: #00ff00;">/</span><span style="color: #0000ff;">"</span>1 <span style="color: #ff0000;">}.</span><span style="color: #0000ff;">"</span>1
</pre>
</div>

<p>
For the example in the problem, the stochastic matrix is,
</p>

<pre class="example">
0 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0
1 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0
0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 1 0 0 1 0 0 0 0 0 0 0 0 0 0
0 0 0 0 1 0 1 0 0 0 0 0 0 0 0 0
0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
1 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0
0 0 0 1 0 0 0 1 0 0 0 0 0 0 1 0
0 0 0 0 0 0 0 0 0 1 1 0 1 0 0 0
0 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0
0 0 0 0 0 0 0 0 0 0 1 1 0 1 0 0
0 0 0 0 0 1 0 0 0 1 0 0 0 1 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1
0 0 0 0 0 0 1 1 0 0 0 0 0 0 1 1
</pre>

<p>
This is better visualized with the source-pair labels,
</p>

<pre class="example">
┌──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┐
│  │CH│HH│CB│NH│HB│HC│HN│NN│BH│NC│NB│BN│BB│BC│CC│CN│
├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│CH│0 │0 │1 │1 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │
├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│HH│0 │0 │0 │0 │0 │0 │0 │0 │1 │0 │0 │0 │0 │0 │0 │0 │
├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│CB│1 │0 │0 │0 │1 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │
├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│NH│0 │1 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │
├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│HB│0 │0 │1 │0 │0 │1 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │
├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│HC│0 │0 │0 │0 │1 │0 │1 │0 │0 │0 │0 │0 │0 │0 │0 │0 │
├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│HN│0 │1 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │
├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│NN│0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │
├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│BH│1 │0 │0 │0 │0 │0 │0 │0 │1 │0 │0 │0 │0 │0 │0 │0 │
├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│NC│0 │0 │0 │1 │0 │0 │0 │1 │0 │0 │0 │0 │0 │0 │1 │0 │
├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│NB│0 │0 │0 │0 │0 │0 │0 │0 │0 │1 │1 │0 │1 │0 │0 │0 │
├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│BN│0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │1 │1 │0 │0 │0 │
├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│BB│0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │1 │1 │0 │1 │0 │0 │
├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│BC│0 │0 │0 │0 │0 │1 │0 │0 │0 │1 │0 │0 │0 │1 │0 │0 │
├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│CC│0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │1 │
├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│CN│0 │0 │0 │0 │0 │0 │1 │1 │0 │0 │0 │0 │0 │0 │1 │1 │
└──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┘
</pre>

<p>
Column <code>CH</code> has ones in locations of <code>CB</code> and <code>BH</code>, since <code>CH -&gt; CB, BH</code>. Column <code>HH</code> has ones in locations of <code>HN</code> and <code>NH</code>, 
since <code>HH -&gt; HN, NH</code> and so on for each rule.
</p>
</div>
</div>

<div id="outline-container-org08744e5" class="outline-5">
<h5 id="org08744e5">Response (template) matrix</h5>
<div class="outline-text-5" id="text-org08744e5">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Create response vectors for each template pair</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = template string</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">x = source molecule pairs</span>
<span style="color: #BA36A5;">tmpltrix</span><span style="color: #000000;">=:</span> (<span style="color: #ff0000;">{.</span><span style="color: #0000ff;">"</span>1)<span style="color: #0000ff;">@</span><span style="color: #ff0000;">[</span> <span style="color: #ff0000;">e.</span><span style="color: #00ff00;">/</span><span style="color: #0000ff;">"</span>1 0 (2<span style="color: #0000ff;">&amp;</span>(<span style="color: #ff0000;">&lt;</span><span style="color: #00ff00;">\</span>)<span style="color: #0000ff;">@</span><span style="color: #ff0000;">]</span>)
</pre>
</div>

<p>
The problem is linearly separable, so each template-pair can be expanded independently and the results accumulated at the end.
</p>

<p>
<code>templtrix</code> finds locations of each of the template-pairs in the source-pairs,
</p>

<pre class="example">
0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0
0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0

</pre>

<p>
which is better visualized with both the source-pair and template-pair labels,
</p>

<pre class="example">
┌──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┐
│  │CH│HH│CB│NH│HB│HC│HN│NN│BH│NC│NB│BN│BB│BC│CC│CN│
├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│NN│0 │0 │0 │0 │0 │0 │0 │1 │0 │0 │0 │0 │0 │0 │0 │0 │
├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│NC│0 │0 │0 │0 │0 │0 │0 │0 │0 │1 │0 │0 │0 │0 │0 │0 │
├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│CB│0 │0 │1 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │0 │
└──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┘

</pre>

<p>
This approach (of creating response vectors for each individual template-pair) works even when the template string contains duplicate pairs.
</p>
</div>
</div>

<div id="outline-container-orgaeeeb35" class="outline-5">
<h5 id="orgaeeeb35">Matrix operations</h5>
<div class="outline-text-5" id="text-orgaeeeb35">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Matrix product</span>
<span style="color: #BA36A5;">mp</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">+</span><span style="color: #00ff00;">/</span> <span style="color: #00ff00;">.</span> <span style="color: #ff0000;">*</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Raise matrix to nth power</span>
<span style="color: #BA36A5;">mpow</span><span style="color: #000000;">=:</span> 4 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'mp/ mp~^:(I.|.#:y) x'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3621285" class="outline-5">
<h5 id="org3621285">Polymerize reaction</h5>
<div class="outline-text-5" id="text-org3621285">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Get count of reaction products for each template-pair </span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">using rules for y generations</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = number of generations</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">x = two-element boxed array (as returned by 'getin')</span>
<span style="color: #8D8D84;">NB.     </span><span style="color: #8D8D84; font-style: italic;">first element = template string</span>
<span style="color: #8D8D84;">NB.     </span><span style="color: #8D8D84; font-style: italic;">second element = 3-column boxed table of rules</span>
<span style="color: #BA36A5;">polymerize</span><span style="color: #000000;">=:</span> 4 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'(((stoctrix r) mpow y) mp ])"1 (r tmpltrix t) [ ''t r''=. x'</span> <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">t = template, r = rules</span>
</pre>
</div>

<pre class="example">
┌───────────────┬──────────────────────────────────────────────────┐
│y polymerize 1 │0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 1                   │
│               │0 0 0 0 0 0 0 0 0 0 1 0 0 1 0 0                   │
│               │1 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0                   │
├───────────────┼──────────────────────────────────────────────────┤
│y polymerize 5 │0 0 0 0 0 0 0 0 0 2  7  4  8 3 3 5                │
│               │0 0 0 0 0 0 0 0 0 0 11 10 10 1 0 0                │
│               │6 3 0 1 8 1 1 0 3 1  1  1  1 4 0 1                │
├───────────────┼──────────────────────────────────────────────────┤
│y polymerize 10│ 0  0   0  0  0  0  0 0  0 21 308 274 298 34 34 55│
│               │ 0  0   0  0  0  0  0 0  0  0 341 340 342  1  0  0│
│               │21 32 115 27 26 76 27 0 81 21 147 121 172 85 26 47│
└───────────────┴──────────────────────────────────────────────────┘
</pre>
</div>
</div>

<div id="outline-container-org31955b9" class="outline-5">
<h5 id="org31955b9">Summarize element counts</h5>
<div class="outline-text-5" id="text-org31955b9">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Summarize count of elements in source molecule pairs after y generations</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = number of generations</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">x = two-element boxed array (as returned by 'getin')</span>
<span style="color: #8D8D84;">NB.     </span><span style="color: #8D8D84; font-style: italic;">first element = template string</span>
<span style="color: #8D8D84;">NB.     </span><span style="color: #8D8D84; font-style: italic;">second element = 3-column boxed table of rules</span>
<span style="color: #BA36A5;">summarize</span><span style="color: #000000;">=:</span> 4 <span style="color: #ff0000;">:</span> <span style="color: #008000;">'(r addendum t) + ({.&amp;.&gt; {."1 r) +//. y [ ''t r''=. x'</span> <span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">t = template, r = rules</span>
</pre>
</div>

<p>
where,
</p>

<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Finds last element of template string in source molecule pairs</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Used in 'summarize' function</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = template string</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">x = 3-column boxed table of rules</span>
<span style="color: #BA36A5;">addendum</span><span style="color: #000000;">=:</span> (<span style="color: #ff0000;">[:</span> <span style="color: #ff0000;">~.</span> (<span style="color: #ff0000;">{.</span><span style="color: #0000ff;">&amp;.</span><span style="color: #ff0000;">&gt;</span>)<span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">{.</span><span style="color: #0000ff;">"</span>1)<span style="color: #0000ff;">@</span><span style="color: #ff0000;">[</span>) <span style="color: #ff0000;">e.</span> <span style="color: #ff0000;">{:</span><span style="color: #0000ff;">@</span>(<span style="color: #ff0000;">;</span><span style="color: #00ff00;">/</span>)<span style="color: #0000ff;">@</span><span style="color: #ff0000;">]</span>
</pre>
</div>

<p>
The element counts can be obtained either from the first or last elements of the source molecule pairs. <code>summarize</code> uses the first (head), 
of the source molecule pairs,
</p>

<pre class="example">
┌──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┐
│CH│HH│CB│NH│HB│HC│HN│NN│BH│NC│NB│BN│BB│BC│CC│CN│
├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│C │H │C │N │H │H │H │N │B │N │N │B │B │B │C │C │
└──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┘

</pre>

<p>
However, this will miss the single count from the <i>last</i> element in the template string. <code>addendum</code> finds this,
</p>

<pre class="example">
┌───────────────┬─────────────────────────────────────────────────┐
│t              │NNCB                                             │
├───────────────┼─────────────────────────────────────────────────┤
│, {."1 r       │┌──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┐│
│               ││CH│HH│CB│NH│HB│HC│HN│NN│BH│NC│NB│BN│BB│BC│CC│CN││
│               │└──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┘│
├───────────────┼─────────────────────────────────────────────────┤
│~. {.&amp;.&gt; {."1 r│┌─┬─┬─┬─┐                                        │
│               ││C│H│N│B│                                        │
│               │└─┴─┴─┴─┘                                        │
├───────────────┼─────────────────────────────────────────────────┤
│;/ t           │┌─┬─┬─┬─┐                                        │
│               ││N│N│C│B│                                        │
│               │└─┴─┴─┴─┘                                        │
├───────────────┼─────────────────────────────────────────────────┤
│r addendum t   │0 0 0 1                                          │
└───────────────┴─────────────────────────────────────────────────┘
</pre>

<p>
and adds it to the summary.
</p>

<p>
Note that if the last elements of the source molecule pairs had been used, then the count from the <i>first</i> element of the template string would
have to be added back to the summary.
</p>
</div>
</div>

<div id="outline-container-org08efd89" class="outline-5">
<h5 id="org08efd89">Range</h5>
<div class="outline-text-5" id="text-org08efd89">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">Finds range (max - min) of element counts after y generations</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">y = number of generations</span>
<span style="color: #8D8D84;">NB. </span><span style="color: #8D8D84; font-style: italic;">x = input as returned by getin</span>
<span style="color: #8D8D84;">NB.     </span><span style="color: #8D8D84; font-style: italic;">first element = template string</span>
<span style="color: #8D8D84;">NB.     </span><span style="color: #8D8D84; font-style: italic;">second element = 3-column boxed table of rules        </span>
<span style="color: #BA36A5;">range</span><span style="color: #000000;">=:</span> <span style="color: #ff0000;">[:</span> (<span style="color: #ff0000;">&gt;.</span><span style="color: #00ff00;">/</span> <span style="color: #ff0000;">-</span> <span style="color: #ff0000;">&lt;.</span><span style="color: #00ff00;">/</span>) <span style="color: #ff0000;">[:</span> (<span style="color: #ff0000;">]</span> <span style="color: #ff0000;">#</span><span style="color: #00ff00;">~</span> 0<span style="color: #ff0000;">:</span> <span style="color: #ff0000;">&lt;</span> <span style="color: #ff0000;">]</span>) <span style="color: #ff0000;">[</span> summarize <span style="color: #ff0000;">+</span><span style="color: #00ff00;">/</span><span style="color: #0000ff;">@:</span>polymerize
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-org146db90" class="outline-3">
<h3 id="org146db90">Part 1</h3>
<div class="outline-text-3" id="text-org146db90">
</div>
<div id="outline-container-orgaa755af" class="outline-4">
<h4 id="orgaa755af">Function definition</h4>
<div class="outline-text-4" id="text-orgaa755af">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part1</span><span style="color: #000000;">=:</span> range<span style="color: #0000ff;">&amp;</span>10
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf9a074a" class="outline-4">
<h4 id="orgf9a074a">Test</h4>
<div class="outline-text-4" id="text-orgf9a074a">
<div class="org-src-container">
<pre class="src src-j">assert 1588 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-14-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcef3751" class="outline-4">
<h4 id="orgcef3751">Solution</h4>
<div class="outline-text-4" id="text-orgcef3751">
<div class="org-src-container">
<pre class="src src-j">assert 3406 <span style="color: #ff0000;">=</span> part1 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-14.txt'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2a2c5c5" class="outline-3">
<h3 id="org2a2c5c5">Part 2</h3>
<div class="outline-text-3" id="text-org2a2c5c5">
</div>
<div id="outline-container-org76ce387" class="outline-4">
<h4 id="org76ce387">Function definition</h4>
<div class="outline-text-4" id="text-org76ce387">
<div class="org-src-container">
<pre class="src src-j"><span style="color: #BA36A5;">part2</span><span style="color: #000000;">=:</span> range<span style="color: #0000ff;">&amp;</span>40
</pre>
</div>
</div>
</div>

<div id="outline-container-org1a7fedb" class="outline-4">
<h4 id="org1a7fedb">Test</h4>
<div class="outline-text-4" id="text-org1a7fedb">
<div class="org-src-container">
<pre class="src src-j">assert 2188189693529 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">inx</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-14-example.txt'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1af04b0" class="outline-4">
<h4 id="org1af04b0">Solution</h4>
<div class="outline-text-4" id="text-org1af04b0">
<div class="org-src-container">
<pre class="src src-j">assert 3941782230241 <span style="color: #ff0000;">=</span> part2 <span style="color: #BA36A5;">in</span><span style="color: #000000;">=.</span> getin <span style="color: #008000;">'inputs/day-14.txt'</span>
</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2021-12-01</p>
<p class="author">Author: Prashanth Kumar</p>
<p class="date">Created: 2022-02-18 Fri 14:16</p>
<p class="creator"><a href="https://www.gnu.org/software/emacs/">Emacs</a> 26.3 (<a href="https://orgmode.org">Org</a> mode 9.1.9)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
